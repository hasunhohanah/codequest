<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CodeQuest â€“ Apprenez Ã  Coder</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged }
    from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc, updateDoc, serverTimestamp }
    from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // âš ï¸ REMPLACEZ PAR VOS VALEURS FIREBASE
  const firebaseConfig = {
   apiKey: "AIzaSyArQDayT8XWK7zK5o2dR9hBgVDrILy9oEk",
   authDomain: "codequest-d714e.firebaseapp.com",
   projectId: "codequest-d714e",
   storageBucket: "codequest-d714e.firebasestorage.app",
   messagingSenderId: "1088669691000",
   appId: "1:1088669691000:web:71cf2755509f329711518d"
};

  const app  = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db   = getFirestore(app);
  window._fb = { auth, db, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, doc, setDoc, getDoc, updateDoc, serverTimestamp };

  onAuthStateChanged(auth, async (fbUser) => {
    if (fbUser) {
      try {
        const snap = await getDoc(doc(db, "users", fbUser.uid));
        if (snap.exists()) {
          window._user = { uid: fbUser.uid, ...snap.data() };
          enterApp(window._user);
        }
      } catch(e) { enterApp({ uid: fbUser.uid, name:'Coder', email: fbUser.email, xp:0, level:1, xpPct:0, streak:0, lastDay:null, done:[], readChapters:[], totalAnswered:0, totalCorrect:0, perfectRuns:0 }); }
    } else { showScreen('auth'); }
  });
</script>

<style>
:root{
  --bg:#090b12;--s:#111320;--s2:#181b2e;--s3:#1f2340;--b:#272b4a;--b2:#343860;
  --t:#f0f2ff;--m:#5a607a;--m2:#7b82a0;
  --a:#5eead4;--a2:#818cf8;--a3:#fb7185;--a4:#fbbf24;--a5:#34d399;--a6:#f472b6;
  --r:16px;--rs:10px;--rx:7px;
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:'Nunito',sans-serif;background:var(--bg);color:var(--t);overflow:hidden;}

/* â”€â”€ SCREENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.screen{display:none;width:100%;height:100vh;}
.screen.active{display:flex;}

/* â”€â”€ LOADING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#screen-loading{align-items:center;justify-content:center;flex-direction:column;gap:1.2rem;
  background:radial-gradient(ellipse at 30% 40%,#1a1d4e44,transparent 60%),var(--bg);}
.load-logo{font-family:'Fredoka One',cursive;font-size:3rem;color:var(--a);animation:glow 2s ease infinite;}
@keyframes glow{0%,100%{text-shadow:0 0 10px var(--a)44;}50%{text-shadow:0 0 30px var(--a),0 0 60px var(--a2)66;}}
.load-dots{display:flex;gap:8px;}
.load-dots span{width:9px;height:9px;border-radius:50%;background:var(--a2);animation:dot 1.2s ease infinite;}
.load-dots span:nth-child(2){animation-delay:.2s;background:var(--a);}
.load-dots span:nth-child(3){animation-delay:.4s;background:var(--a4);}
@keyframes dot{0%,100%{transform:scale(1);opacity:.3;}50%{transform:scale(1.5);opacity:1;}}

/* â”€â”€ AUTH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#screen-auth{
  background:radial-gradient(ellipse at 15% 50%,#1a1d5e55,transparent 55%),
             radial-gradient(ellipse at 85% 20%,#0e2a1e55,transparent 50%),var(--bg);
  align-items:center;justify-content:center;flex-direction:column;gap:2rem;overflow:hidden;position:relative;}
.auth-bg{position:absolute;inset:0;pointer-events:none;}
.auth-orb{position:absolute;border-radius:50%;filter:blur(80px);animation:drift ease-in-out infinite;}
@keyframes drift{0%,100%{transform:translate(0,0);}50%{transform:translate(30px,-20px);}}
.auth-logo-wrap{text-align:center;z-index:1;}
.auth-logo{font-family:'Fredoka One',cursive;font-size:3.5rem;background:linear-gradient(135deg,var(--a),var(--a2),var(--a6));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.auth-tagline{color:var(--m2);font-size:.9rem;margin-top:.3rem;font-weight:700;letter-spacing:.03em;}
.auth-card{background:var(--s);border:1px solid var(--b);border-radius:var(--r);padding:2rem;width:100%;max-width:420px;box-shadow:0 30px 80px #00000070;z-index:1;backdrop-filter:blur(10px);}
.a-tabs{display:flex;gap:.4rem;margin-bottom:1.5rem;background:var(--s2);border-radius:var(--rs);padding:4px;}
.a-tab{flex:1;padding:.55rem;border:none;border-radius:var(--rx);background:transparent;color:var(--m);font-family:'Nunito',sans-serif;font-weight:800;font-size:.88rem;cursor:pointer;transition:all .2s;}
.a-tab.active{background:var(--s3);color:var(--t);}
.fld{margin-bottom:.9rem;}
.fld label{display:block;font-size:.72rem;font-weight:800;text-transform:uppercase;letter-spacing:.07em;color:var(--m);margin-bottom:.35rem;}
.fld input{width:100%;background:var(--s2);border:1px solid var(--b);border-radius:var(--rx);padding:.7rem 1rem;color:var(--t);font-family:'Nunito',sans-serif;font-size:.92rem;font-weight:600;transition:border-color .2s;}
.fld input:focus{outline:none;border-color:var(--a2);}
.fld input::placeholder{color:var(--m);}
.ava-row{display:grid;grid-template-columns:repeat(6,1fr);gap:.4rem;margin-bottom:.9rem;}
.ava-o{height:44px;border-radius:50%;background:var(--s2);border:2px solid var(--b);display:flex;align-items:center;justify-content:center;font-size:1.3rem;cursor:pointer;transition:all .2s;}
.ava-o:hover{border-color:var(--a2);}
.ava-o.sel{border-color:var(--a);background:var(--s3);}
.a-btn{width:100%;padding:.88rem;border:none;border-radius:var(--rs);background:linear-gradient(135deg,var(--a2),#6366f1);color:white;font-family:'Nunito',sans-serif;font-size:.98rem;font-weight:800;cursor:pointer;transition:all .2s;margin-top:.4rem;}
.a-btn:hover{opacity:.86;transform:translateY(-2px);}
.a-btn:disabled{opacity:.45;cursor:not-allowed;transform:none;}
.a-msg{border-radius:var(--rx);padding:.65rem 1rem;font-size:.83rem;font-weight:700;margin-bottom:.9rem;display:none;}
.a-msg.show{display:block;}
.a-msg.err{background:#fb718520;border:1px solid #fb718540;color:var(--a3);}
.a-msg.ok{background:#5eead420;border:1px solid #5eead440;color:var(--a);}

/* â”€â”€ APP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#screen-app{flex-direction:row;}

/* SIDEBAR */
.sidebar{width:80px;background:var(--s);border-right:1px solid var(--b);display:flex;flex-direction:column;align-items:center;padding:1.2rem 0;gap:.25rem;flex-shrink:0;}
.sb-logo{font-family:'Fredoka One',cursive;font-size:1.5rem;color:var(--a);margin-bottom:1.1rem;filter:drop-shadow(0 0 8px var(--a)55);}
.nb{width:54px;height:54px;border-radius:13px;border:2px solid transparent;background:transparent;color:var(--m);cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;transition:all .2s;}
.nb:hover{background:var(--s2);color:var(--t);}
.nb.active{background:var(--s2);color:var(--a);border-color:var(--a)33;}
.nb .ni{font-size:1.25rem;}.nb .nl{font-size:.55rem;font-weight:800;text-transform:uppercase;letter-spacing:.04em;}
.sb-sep{width:38px;height:1px;background:var(--b);margin:.4rem 0;}
.sb-bot{margin-top:auto;display:flex;flex-direction:column;align-items:center;gap:.4rem;}
.sb-ava{width:44px;height:44px;border-radius:50%;background:var(--s2);border:2px solid var(--b);display:flex;align-items:center;justify-content:center;font-size:1.35rem;cursor:pointer;transition:all .2s;}
.sb-ava:hover{border-color:var(--a);}
.sb-logout{width:34px;height:34px;border-radius:9px;border:none;background:transparent;color:var(--m);font-size:.95rem;cursor:pointer;transition:all .2s;font-family:'Nunito',sans-serif;}
.sb-logout:hover{background:#fb718520;color:var(--a3);}

/* MAIN */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden;}

/* TOPBAR */
.topbar{display:flex;align-items:center;gap:.9rem;padding:.8rem 1.5rem;background:var(--s);border-bottom:1px solid var(--b);flex-shrink:0;}
.tb-title{font-family:'Fredoka One',cursive;font-size:1.15rem;color:var(--a);flex:1;}
.chip{display:flex;align-items:center;gap:.45rem;background:var(--s2);border:1px solid var(--b);border-radius:999px;padding:.3rem .85rem;font-size:.8rem;font-weight:800;white-space:nowrap;}
.chip.xp{color:var(--a4);}.chip.str{color:#fb923c;}.chip.cloud{color:var(--a);}
.xp-wrap{display:flex;flex-direction:column;gap:2px;min-width:110px;}
.xp-lbl{font-size:.65rem;font-weight:800;color:var(--m);letter-spacing:.04em;}
.xp-track{background:var(--s2);border-radius:999px;height:6px;border:1px solid var(--b);}
.xp-fill{background:linear-gradient(90deg,var(--a),var(--a2));height:100%;border-radius:999px;transition:width .7s cubic-bezier(.34,1.56,.64,1);}

/* CONTENT */
.content{flex:1;overflow-y:auto;padding:1.6rem;}
.content::-webkit-scrollbar{width:4px;}
.content::-webkit-scrollbar-thumb{background:var(--b);border-radius:2px;}

/* VIEWS */
.view{display:none;}
.view.active{display:block;animation:fadeUp .3s ease;}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* â”€â”€ HOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero{margin-bottom:1.6rem;}
.hero h1{font-family:'Fredoka One',cursive;font-size:1.9rem;line-height:1.2;}
.hero h1 em{font-style:normal;background:linear-gradient(90deg,var(--a),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.hero p{color:var(--m2);margin-top:.3rem;font-size:.87rem;}
.daily{background:linear-gradient(135deg,#151840,#1a2810);border:1px solid var(--b);border-radius:var(--r);padding:1.2rem 1.4rem;display:flex;align-items:center;gap:1.1rem;margin-bottom:1.6rem;cursor:pointer;transition:all .2s;overflow:hidden;position:relative;}
.daily::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,#ffffff04,transparent);animation:shim 3s infinite;}
@keyframes shim{from{transform:translateX(-100%);}to{transform:translateX(100%);}}
.daily:hover{border-color:var(--a2);transform:translateY(-2px);}
.daily-ico{font-size:2.6rem;flex-shrink:0;}
.daily-txt h3{font-weight:800;font-size:1rem;margin-bottom:.2rem;}
.daily-txt p{font-size:.8rem;color:var(--m2);}
.daily-cta{margin-left:auto;background:var(--a4);color:#000;border:none;border-radius:999px;padding:.55rem 1.3rem;font-family:'Nunito',sans-serif;font-weight:800;font-size:.82rem;cursor:pointer;flex-shrink:0;}
.sec-h{font-size:.7rem;font-weight:800;text-transform:uppercase;letter-spacing:.08em;color:var(--m);margin-bottom:.9rem;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:.9rem;margin-bottom:1.8rem;}
.cc{background:var(--s);border:2px solid var(--b);border-radius:var(--r);padding:1.2rem;cursor:pointer;transition:all .25s;position:relative;overflow:hidden;}
.cc::before{content:'';position:absolute;inset:0;background:var(--cc);opacity:0;transition:opacity .25s;}
.cc:hover{border-color:var(--cc);transform:translateY(-3px);box-shadow:0 8px 25px #00000050;}
.cc:hover::before{opacity:.07;}
.cc-bdg{position:absolute;top:.8rem;right:.8rem;background:var(--cc);color:#000;font-size:.6rem;font-weight:800;padding:.12rem .45rem;border-radius:999px;}
.cc-ico{font-size:1.9rem;margin-bottom:.6rem;}
.cc-nm{font-weight:800;font-size:.92rem;margin-bottom:.2rem;}
.cc-ds{font-size:.73rem;color:var(--m2);line-height:1.5;margin-bottom:.8rem;}
.cc-pg{background:var(--s2);border-radius:999px;height:4px;}
.cc-pgf{height:100%;border-radius:999px;background:var(--cc);}
.cc-mt{display:flex;justify-content:space-between;margin-top:.4rem;font-size:.68rem;color:var(--m);font-weight:700;}

/* â”€â”€ LESSON LIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lesson-bar{display:flex;align-items:center;gap:.9rem;margin-bottom:1.4rem;}
.back-btn{background:var(--s2);border:1px solid var(--b);color:var(--t);padding:.45rem .9rem;border-radius:var(--rx);font-size:.8rem;font-weight:700;cursor:pointer;font-family:'Nunito',sans-serif;transition:all .2s;}
.back-btn:hover{border-color:var(--a);color:var(--a);}
.lesson-meta h2{font-size:1.2rem;font-weight:900;}
.lesson-meta p{color:var(--m2);font-size:.8rem;}
.units{display:flex;flex-direction:column;gap:.7rem;}
.unit-row{background:var(--s);border:2px solid var(--b);border-radius:var(--r);padding:1rem 1.2rem;display:flex;align-items:center;gap:.9rem;cursor:pointer;transition:all .2s;}
.unit-row:hover:not(.locked){border-color:var(--uc);transform:translateX(4px);}
.unit-row.done{border-color:var(--a)55;background:#5eead40a;}
.unit-row.locked{opacity:.35;cursor:not-allowed;}
.u-ico{width:44px;height:44px;border-radius:11px;background:var(--s2);display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;border:2px solid var(--uc,#5eead4)30;}
.unit-row.done .u-ico{border-color:var(--a);background:#5eead410;}
.u-txt{flex:1;}
.u-txt h3{font-weight:800;font-size:.88rem;margin-bottom:.12rem;}
.u-txt p{font-size:.73rem;color:var(--m2);}
.u-modes{display:flex;gap:.4rem;align-items:center;}
.u-mode-badge{font-size:.65rem;font-weight:800;padding:.15rem .5rem;border-radius:999px;border:1px solid;}
.u-mode-badge.theory{background:#818cf820;border-color:#818cf840;color:var(--a2);}
.u-mode-badge.quiz{background:#5eead420;border-color:#5eead440;color:var(--a);}
.u-mode-badge.code{background:#fbbf2420;border-color:#fbbf2440;color:var(--a4);}
.u-xp{background:var(--s2);border:1px solid var(--b);border-radius:999px;padding:.18rem .65rem;font-size:.7rem;font-weight:800;color:var(--a4);white-space:nowrap;}

/* â”€â”€ UNIT DETAIL (mode selector) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.unit-detail-header{display:flex;align-items:center;gap:.9rem;margin-bottom:1.4rem;}
.unit-modes-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;max-width:680px;margin:0 auto 2rem;}
.mode-card{background:var(--s);border:2px solid var(--b);border-radius:var(--r);padding:1.8rem 1.2rem;text-align:center;cursor:pointer;transition:all .25s;}
.mode-card:hover{transform:translateY(-4px);box-shadow:0 10px 30px #00000040;}
.mode-card.theory-c:hover{border-color:var(--a2);}
.mode-card.quiz-c:hover{border-color:var(--a);}
.mode-card.code-c:hover{border-color:var(--a4);}
.mode-card .mc-ico{font-size:2.5rem;margin-bottom:.8rem;}
.mode-card h3{font-weight:800;font-size:1rem;margin-bottom:.4rem;}
.mode-card p{font-size:.78rem;color:var(--m2);line-height:1.5;}
.mode-card .mc-pill{display:inline-block;margin-top:.8rem;padding:.25rem .7rem;border-radius:999px;font-size:.7rem;font-weight:800;}
.theory-c .mc-pill{background:#818cf820;color:var(--a2);border:1px solid #818cf840;}
.quiz-c .mc-pill{background:#5eead420;color:var(--a);border:1px solid #5eead440;}
.code-c .mc-pill{background:#fbbf2420;color:var(--a4);border:1px solid #fbbf2440;}

/* â”€â”€ THEORY VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.theory-shell{max-width:760px;margin:0 auto;}
.theory-topbar{display:flex;align-items:center;gap:1rem;margin-bottom:1.4rem;}
.chapter-prog{flex:1;}
.ch-prog-label{font-size:.7rem;font-weight:800;color:var(--m);margin-bottom:.3rem;}
.ch-prog-dots{display:flex;gap:.4rem;}
.ch-dot{width:28px;height:6px;border-radius:999px;background:var(--b);transition:all .3s;}
.ch-dot.done{background:var(--a2);}
.ch-dot.active{background:var(--a);width:40px;}

.theory-card{background:var(--s);border:1px solid var(--b);border-radius:var(--r);padding:1.8rem;margin-bottom:1rem;animation:fadeUp .3s ease;}
.theory-card .ch-badge{display:inline-flex;align-items:center;gap:.4rem;background:var(--s2);border:1px solid var(--b);border-radius:999px;padding:.22rem .75rem;font-size:.68rem;font-weight:800;color:var(--m2);text-transform:uppercase;letter-spacing:.06em;margin-bottom:1rem;}
.theory-card h2{font-size:1.2rem;font-weight:900;margin-bottom:.8rem;color:var(--t);}
.theory-card .lead{font-size:.92rem;color:var(--m2);line-height:1.8;margin-bottom:1.2rem;}
.theory-card h3{font-size:.88rem;font-weight:800;color:var(--a2);margin:1.2rem 0 .5rem;}
.theory-card p{font-size:.87rem;color:#c4c9e8;line-height:1.8;margin-bottom:.8rem;}
.theory-card ul,.theory-card ol{padding-left:1.3rem;margin-bottom:.8rem;}
.theory-card li{font-size:.87rem;color:#c4c9e8;line-height:1.8;margin-bottom:.2rem;}
.theory-card .note{background:#818cf815;border-left:3px solid var(--a2);border-radius:0 var(--rx) var(--rx) 0;padding:.8rem 1rem;margin:.8rem 0;font-size:.83rem;color:#a5b4fc;}
.theory-card .tip{background:#5eead415;border-left:3px solid var(--a);border-radius:0 var(--rx) var(--rx) 0;padding:.8rem 1rem;margin:.8rem 0;font-size:.83rem;color:var(--a);}
.theory-card .warn{background:#fbbf2415;border-left:3px solid var(--a4);border-radius:0 var(--rx) var(--rx) 0;padding:.8rem 1rem;margin:.8rem 0;font-size:.83rem;color:var(--a4);}

/* Code blocks in theory */
.codeblock{background:#070910;border:1px solid var(--b);border-left:3px solid var(--a2);border-radius:var(--rx);padding:.9rem 1.1rem;margin:.8rem 0;position:relative;font-family:'JetBrains Mono',monospace;font-size:.8rem;line-height:1.85;overflow-x:auto;color:#c9d1d9;}
.codeblock .cb-lang{position:absolute;top:.5rem;right:2.8rem;font-size:.6rem;font-weight:800;text-transform:uppercase;letter-spacing:.06em;color:var(--m);font-family:'Nunito',sans-serif;}
.copy-btn{position:absolute;top:.45rem;right:.5rem;background:var(--s2);border:1px solid var(--b);color:var(--m);padding:.18rem .55rem;border-radius:5px;cursor:pointer;font-size:.68rem;font-weight:800;transition:all .2s;font-family:'Nunito',sans-serif;}
.copy-btn:hover{background:var(--b);color:var(--t);}
.copy-btn.cp{background:var(--a);color:#000;border-color:var(--a);}
/* Syntax */
.kw{color:#c084fc;}.fn{color:#7dd3fc;}.str{color:#86efac;}.cm{color:#374151;font-style:italic;}.num{color:#fb923c;}.op{color:#f472b6;}.cls{color:#fde68a;}.mc{color:#6ade80;}.wc{color:#c79a3e;}.at{color:#38bdf8;}

.theory-nav{display:flex;gap:.8rem;margin-top:1.2rem;}
.t-btn{flex:1;padding:.8rem;border:none;border-radius:var(--rs);font-family:'Nunito',sans-serif;font-size:.92rem;font-weight:800;cursor:pointer;transition:all .2s;}
.t-btn.prev{background:var(--s2);color:var(--m2);border:1px solid var(--b);}
.t-btn.prev:hover{border-color:var(--a2);color:var(--a2);}
.t-btn.next{background:linear-gradient(135deg,var(--a2),#6366f1);color:white;}
.t-btn.next:hover{opacity:.85;transform:translateY(-2px);}
.t-btn.finish{background:linear-gradient(135deg,var(--a),var(--a5));color:#000;}

/* End-of-theory mini quiz prompt */
.theory-complete{background:linear-gradient(135deg,var(--s2),var(--s3));border:2px solid var(--a);border-radius:var(--r);padding:2rem;text-align:center;animation:fadeUp .4s ease;}
.tc-icon{font-size:3.5rem;margin-bottom:.8rem;}
.tc-title{font-family:'Fredoka One',cursive;font-size:1.6rem;color:var(--a);margin-bottom:.5rem;}
.tc-sub{color:var(--m2);font-size:.88rem;margin-bottom:1.5rem;line-height:1.6;}
.tc-btns{display:flex;gap:.8rem;justify-content:center;flex-wrap:wrap;}
.tc-btn{padding:.75rem 1.8rem;border:none;border-radius:var(--rs);font-family:'Nunito',sans-serif;font-weight:800;font-size:.9rem;cursor:pointer;transition:all .2s;}
.tc-btn.quiz-go{background:linear-gradient(135deg,var(--a),var(--a5));color:#000;}
.tc-btn.back-home{background:var(--s2);color:var(--t);border:1px solid var(--b);}
.tc-btn:hover{opacity:.85;transform:translateY(-2px);}

/* â”€â”€ CODE SANDBOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sandbox-shell{max-width:860px;margin:0 auto;}
.sandbox-header{display:flex;align-items:center;gap:.9rem;margin-bottom:1.2rem;}
.sandbox-body{display:grid;grid-template-columns:1fr 1fr;gap:1rem;height:420px;}
.sandbox-panel{background:var(--s);border:1px solid var(--b);border-radius:var(--r);display:flex;flex-direction:column;overflow:hidden;}
.sp-header{display:flex;align-items:center;justify-content:space-between;padding:.6rem 1rem;background:var(--s2);border-bottom:1px solid var(--b);flex-shrink:0;}
.sp-title{font-size:.72rem;font-weight:800;text-transform:uppercase;letter-spacing:.06em;color:var(--m);}
.sp-actions{display:flex;gap:.4rem;}
.sp-btn{background:var(--s3);border:1px solid var(--b);color:var(--m2);padding:.25rem .7rem;border-radius:5px;cursor:pointer;font-size:.72rem;font-weight:800;font-family:'Nunito',sans-serif;transition:all .2s;}
.sp-btn:hover{background:var(--b);color:var(--t);}
.sp-btn.run{background:var(--a);color:#000;border-color:var(--a);}
.sp-btn.run:hover{opacity:.85;}
.sp-btn.reset{background:#fb718520;border-color:#fb718540;color:var(--a3);}
.code-editor{flex:1;background:#060810;border:none;outline:none;padding:1rem;font-family:'JetBrains Mono',monospace;font-size:.8rem;color:#e2e8f0;resize:none;line-height:1.8;}
.output-area{flex:1;padding:1rem;font-family:'JetBrains Mono',monospace;font-size:.8rem;line-height:1.8;overflow-y:auto;color:#c9d1d9;}
.output-area .out-line{margin-bottom:.1rem;}
.output-area .out-err{color:var(--a3);}
.output-area .out-ok{color:var(--a);}
.output-area .out-info{color:var(--m2);font-style:italic;}
.sandbox-exercises{margin-top:1rem;}
.ex-title{font-size:.72rem;font-weight:800;text-transform:uppercase;letter-spacing:.06em;color:var(--m);margin-bottom:.6rem;}
.ex-list{display:flex;gap:.5rem;flex-wrap:wrap;}
.ex-btn{background:var(--s);border:1px solid var(--b);border-radius:var(--rx);padding:.4rem .85rem;font-size:.78rem;font-weight:700;cursor:pointer;color:var(--m2);transition:all .2s;font-family:'Nunito',sans-serif;}
.ex-btn:hover{border-color:var(--a4);color:var(--a4);}
.ex-btn.active{background:var(--a4)20;border-color:var(--a4);color:var(--a4);}

/* â”€â”€ QUIZ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.quiz-shell{max-width:680px;margin:0 auto;}
.quiz-topbar{display:flex;align-items:center;gap:.9rem;margin-bottom:1.3rem;}
.q-prog-wrap{flex:1;}
.q-prog-track{background:var(--s2);border-radius:999px;height:9px;border:1px solid var(--b);}
.q-prog-fill{background:linear-gradient(90deg,var(--a),var(--a2));height:100%;border-radius:999px;transition:width .5s ease;}
.q-counter{font-size:.78rem;font-weight:800;color:var(--m);white-space:nowrap;}
.inf-badge{background:#5eead420;border:1px solid #5eead440;color:var(--a);border-radius:999px;padding:.28rem .75rem;font-size:.72rem;font-weight:800;}
.quiz-card{background:var(--s);border:2px solid var(--b);border-radius:var(--r);padding:1.8rem;}
.q-pill{display:inline-flex;align-items:center;gap:.4rem;background:var(--s2);border:1px solid var(--b);border-radius:999px;padding:.22rem .75rem;font-size:.68rem;font-weight:800;color:var(--m2);text-transform:uppercase;letter-spacing:.06em;margin-bottom:1rem;}
.q-txt{font-size:1.05rem;font-weight:800;line-height:1.5;margin-bottom:.7rem;}
.q-code{background:#060810;border:1px solid var(--b);border-left:3px solid var(--a2);border-radius:var(--rx);padding:.9rem 1.1rem;font-family:'JetBrains Mono',monospace;font-size:.78rem;line-height:1.85;margin-bottom:1.3rem;overflow-x:auto;color:#c9d1d9;}
.opts{display:grid;grid-template-columns:1fr 1fr;gap:.7rem;margin-bottom:1.2rem;}
.opt{background:var(--s2);border:2px solid var(--b);border-radius:var(--rs);padding:.85rem .9rem;color:var(--t);font-family:'Nunito',sans-serif;font-size:.86rem;font-weight:700;cursor:pointer;transition:all .2s;text-align:left;display:flex;align-items:center;gap:.65rem;}
.opt:hover:not(:disabled){border-color:var(--a2);background:#818cf810;}
.opt.sel{border-color:var(--a2);background:#818cf818;}
.opt.ok{border-color:var(--a)!important;background:#5eead418!important;color:var(--a);}
.opt.bad{border-color:var(--a3)!important;background:#fb718518!important;color:var(--a3);}
.opt-k{width:26px;height:26px;background:var(--s);border:1px solid var(--b);border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:800;color:var(--m);flex-shrink:0;}
.opt.ok .opt-k{background:var(--a);color:#000;border-color:var(--a);}
.opt.bad .opt-k{background:var(--a3);color:#fff;border-color:var(--a3);}
.fill-inp{background:var(--s2);border:2px solid var(--a2);border-radius:var(--rx);color:var(--a2);font-family:'JetBrains Mono',monospace;font-size:.92rem;font-weight:700;padding:.5rem 1rem;width:200px;text-align:center;outline:none;transition:all .2s;margin-bottom:1.2rem;}
.fill-inp:focus{border-color:var(--a);box-shadow:0 0 0 3px #5eead420;}
.fill-inp.ok{border-color:var(--a);color:var(--a);}
.fill-inp.bad{border-color:var(--a3);color:var(--a3);}
.feedback{border-radius:var(--rs);padding:.9rem 1.1rem;margin-bottom:1.1rem;display:none;gap:.75rem;align-items:flex-start;}
.feedback.show{display:flex;}
.feedback.ok{background:#5eead415;border:1px solid #5eead430;color:var(--a);}
.feedback.bad{background:#fb718515;border:1px solid #fb718530;color:var(--a3);}
.fb-ico{font-size:1.2rem;flex-shrink:0;}
.fb-body strong{display:block;margin-bottom:.15rem;font-size:.88rem;}
.fb-body span{font-size:.78rem;opacity:.8;}
.quiz-acts{display:flex;gap:.7rem;}
.q-btn{flex:1;padding:.82rem;border:none;border-radius:var(--rs);font-family:'Nunito',sans-serif;font-size:.92rem;font-weight:800;cursor:pointer;transition:all .2s;}
.q-btn.primary{background:linear-gradient(135deg,var(--a2),#6366f1);color:white;}
.q-btn.success{background:linear-gradient(135deg,var(--a),var(--a5));color:#000;}
.q-btn.skip{background:var(--s2);color:var(--m);border:1px solid var(--b);flex:0 0 auto;padding:.82rem 1.1rem;}
.q-btn:hover:not(:disabled){opacity:.85;transform:translateY(-2px);}
.q-btn:disabled{opacity:.3;cursor:default;transform:none;}

/* RESULTS */
.results-wrap{max-width:500px;margin:2rem auto;text-align:center;}
.res-trophy{font-size:5rem;display:block;animation:pop .5s cubic-bezier(.34,1.56,.64,1);margin-bottom:.9rem;}
@keyframes pop{from{transform:scale(0);}to{transform:scale(1);}}
.res-title{font-family:'Fredoka One',cursive;font-size:1.9rem;margin-bottom:.4rem;}
.res-sub{color:var(--m2);margin-bottom:1.6rem;font-size:.88rem;}
.res-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:.9rem;margin-bottom:1.6rem;}
.r-stat{background:var(--s);border:1px solid var(--b);border-radius:var(--rs);padding:1.1rem;}
.r-stat .rv{font-size:1.7rem;font-weight:900;}.r-stat .rl{font-size:.65rem;color:var(--m);font-weight:800;text-transform:uppercase;margin-top:.2rem;}
.res-btns{display:flex;flex-direction:column;gap:.7rem;}
.r-btn{padding:.82rem;border:none;border-radius:var(--rs);font-family:'Nunito',sans-serif;font-weight:800;font-size:.92rem;cursor:pointer;transition:all .2s;}
.r-btn.main{background:linear-gradient(135deg,var(--a2),#6366f1);color:white;}
.r-btn.sec{background:var(--s2);color:var(--t);border:1px solid var(--b);}
.r-btn:hover{opacity:.85;transform:translateY(-1px);}

/* LEADERBOARD */
.lb-h{display:flex;align-items:center;gap:.9rem;margin-bottom:1.4rem;}
.lb-h h1{font-family:'Fredoka One',cursive;font-size:1.7rem;}
.lb-badge{font-size:.75rem;color:var(--m2);font-weight:700;background:var(--s2);border:1px solid var(--b);border-radius:999px;padding:.28rem .75rem;}
.lb-rows{display:flex;flex-direction:column;gap:.55rem;}
.lb-r{background:var(--s);border:1px solid var(--b);border-radius:var(--rs);padding:.9rem 1.1rem;display:flex;align-items:center;gap:.85rem;transition:all .2s;}
.lb-r:hover{transform:translateX(4px);}
.lb-r.me{border-color:var(--a);background:#5eead40a;}
.lb-rank{font-size:1rem;font-weight:900;width:28px;text-align:center;flex-shrink:0;}
.lb-ava{width:38px;height:38px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0;}
.lb-inf{flex:1;}
.lb-nm{font-weight:800;font-size:.88rem;}
.lb-sb{font-size:.7rem;color:var(--m2);margin-top:1px;}
.lb-xp{font-weight:900;color:var(--a4);font-size:.85rem;}

/* PROFILE */
.p-top{background:linear-gradient(135deg,var(--s2),var(--s));border:1px solid var(--b);border-radius:var(--r);padding:1.6rem;margin-bottom:1.2rem;display:flex;align-items:center;gap:1.4rem;}
.p-ava{width:84px;height:84px;border-radius:50%;background:var(--s3);display:flex;align-items:center;justify-content:center;font-size:2.4rem;border:3px solid var(--a);box-shadow:0 0 20px var(--a)44;flex-shrink:0;}
.p-inf h2{font-size:1.3rem;font-weight:900;}
.p-email{font-size:.78rem;color:var(--m2);margin-top:.15rem;}
.p-cloud{display:inline-flex;align-items:center;gap:.4rem;margin-top:.5rem;background:#5eead420;border:1px solid #5eead440;color:var(--a);border-radius:999px;padding:.22rem .65rem;font-size:.7rem;font-weight:800;}
.p-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:.7rem;margin-bottom:1.2rem;}
.ps{background:var(--s);border:1px solid var(--b);border-radius:var(--rs);padding:.9rem;text-align:center;}
.ps .pv{font-size:1.45rem;font-weight:900;}.ps .pl{font-size:.65rem;color:var(--m);font-weight:800;text-transform:uppercase;margin-top:.2rem;}
.ach-g{display:grid;grid-template-columns:repeat(auto-fill,minmax(125px,1fr));gap:.7rem;}
.ach-c{background:var(--s);border:2px solid var(--b);border-radius:var(--rs);padding:.9rem;text-align:center;transition:all .2s;}
.ach-c.unlocked{border-color:var(--a4);background:#fbbf2408;}
.ach-c:hover{transform:translateY(-2px);}
.ach-ico{font-size:1.7rem;margin-bottom:.35rem;}
.ach-nm{font-size:.73rem;font-weight:800;margin-bottom:.12rem;}
.ach-ds{font-size:.65rem;color:var(--m);}

/* TOAST */
.toast{position:fixed;bottom:1.4rem;right:1.4rem;z-index:9999;padding:.75rem 1.3rem;border-radius:999px;font-weight:800;font-size:.88rem;transform:translateY(80px);opacity:0;pointer-events:none;transition:all .4s cubic-bezier(.34,1.56,.64,1);}
.toast.show{transform:translateY(0);opacity:1;}
.toast.xp{background:var(--a4);color:#000;}
.toast.info{background:var(--a2);color:white;}
.toast.err{background:var(--a3);color:white;}
.toast.cloud{background:var(--a);color:#000;}
</style>
</head>
<body>

<!-- LOADING -->
<div class="screen active" id="screen-loading">
  <div class="load-logo">âš¡ CodeQuest</div>
  <div style="color:var(--m2);font-size:.88rem;font-weight:700;">Connexion Firebaseâ€¦</div>
  <div class="load-dots"><span></span><span></span><span></span></div>
</div>

<!-- AUTH -->
<div class="screen" id="screen-auth">
  <div class="auth-bg">
    <div class="auth-orb" style="width:400px;height:400px;background:#4f46e520;left:-100px;top:10%;animation-duration:8s;"></div>
    <div class="auth-orb" style="width:300px;height:300px;background:#5eead415;right:-50px;bottom:15%;animation-duration:11s;animation-delay:-4s;"></div>
  </div>
  <div class="auth-logo-wrap">
    <div class="auth-logo">âš¡ CodeQuest</div>
    <div class="auth-tagline">Apprenez Ã  coder Â· Cours complets Â· Progression cloud â˜ï¸</div>
  </div>
  <div class="auth-card">
    <div class="a-tabs">
      <button class="a-tab active" onclick="switchTab('login')">Connexion</button>
      <button class="a-tab" onclick="switchTab('register')">CrÃ©er un compte</button>
    </div>
    <div class="a-msg" id="a-msg"></div>
    <div id="tab-login">
      <div class="fld"><label>Adresse e-mail</label><input id="l-email" type="email" placeholder="vous@exemple.com"></div>
      <div class="fld"><label>Mot de passe</label><input id="l-pwd" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
      <button class="a-btn" id="login-btn" onclick="doLogin()">Se connecter â†’</button>
    </div>
    <div id="tab-register" style="display:none">
      <div class="fld"><label>Pseudo</label><input id="r-name" type="text" placeholder="CoolCoder42"></div>
      <div class="fld"><label>Adresse e-mail</label><input id="r-email" type="email" placeholder="vous@exemple.com"></div>
      <div class="fld"><label>Mot de passe (min. 6 caractÃ¨res)</label><input id="r-pwd" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
      <div class="fld"><label>Avatar</label><div class="ava-row" id="ava-grid"></div></div>
      <button class="a-btn" id="reg-btn" onclick="doRegister()">CrÃ©er mon compte ğŸš€</button>
    </div>
  </div>
</div>

<!-- APP -->
<div class="screen" id="screen-app">
  <div class="sidebar">
    <div class="sb-logo">âš¡</div>
    <button class="nb active" id="nb-home" onclick="showView('home')"><span class="ni">ğŸ </span><span class="nl">Accueil</span></button>
    <button class="nb" id="nb-lb" onclick="showView('lb')"><span class="ni">ğŸ†</span><span class="nl">Top</span></button>
    <button class="nb" id="nb-profile" onclick="showView('profile')"><span class="ni">ğŸ‘¤</span><span class="nl">Profil</span></button>
    <div class="sb-sep"></div>
    <div class="sb-bot">
      <div class="sb-ava" id="sb-ava" onclick="showView('profile')">ğŸ§‘</div>
      <button class="sb-logout" onclick="doLogout()" title="DÃ©connexion">â»</button>
    </div>
  </div>
  <div class="main">
    <div class="topbar">
      <div class="tb-title">CodeQuest</div>
      <div class="chip cloud">â˜ï¸ Sauvegarde active</div>
      <div class="xp-wrap">
        <div class="xp-lbl">Niveau <span id="tb-lvl">1</span></div>
        <div class="xp-track"><div class="xp-fill" id="tb-xpf" style="width:0%"></div></div>
      </div>
      <div class="chip xp">âš¡ <span id="tb-xp">0</span></div>
      <div class="chip str">ğŸ”¥ <span id="tb-str">0</span></div>
    </div>
    <div class="content">

      <!-- HOME -->
      <div class="view active" id="view-home">
        <div class="hero">
          <h1>PrÃªt Ã  apprendre,<br><em id="hero-name">Coder</em> ?</h1>
          <p>ğŸ“– Cours complets Â· ğŸ¯ Quiz variÃ©s Â· ğŸ’» Sandbox de code Â· â™¾ï¸ Sans limite</p>
        </div>
        <div class="daily" onclick="startQuiz('daily')">
          <div class="daily-ico">âš¡</div>
          <div class="daily-txt"><h3>DÃ©fi du Jour</h3><p>Mix de langages Â· 5 questions Â· Double XP</p></div>
          <button class="daily-cta">Lancer â†’</button>
        </div>
        <div class="sec-h">Tous les Parcours</div>
        <div class="grid" id="courses-grid"></div>
      </div>

      <!-- LESSON LIST -->
      <div class="view" id="view-lessons">
        <div class="lesson-bar">
          <button class="back-btn" onclick="showView('home')">â† Retour</button>
          <div class="lesson-meta"><h2 id="lesson-title">Cours</h2><p id="lesson-sub"></p></div>
        </div>
        <div class="units" id="units-list"></div>
      </div>

      <!-- UNIT DETAIL (choose mode) -->
      <div class="view" id="view-unit">
        <div class="unit-detail-header">
          <button class="back-btn" onclick="showView('lessons')">â† Retour</button>
          <div class="lesson-meta"><h2 id="unit-title">LeÃ§on</h2><p id="unit-sub"></p></div>
        </div>
        <div class="unit-modes-grid">
          <div class="mode-card theory-c" onclick="startTheory()">
            <div class="mc-ico">ğŸ“–</div>
            <h3>Cours ThÃ©orique</h3>
            <p>Apprenez les concepts avec des explications claires et des exemples de code annotÃ©s</p>
            <div class="mc-pill">RecommandÃ© en premier</div>
          </div>
          <div class="mode-card code-c" onclick="startSandbox()">
            <div class="mc-ico">ğŸ’»</div>
            <h3>Sandbox de Code</h3>
            <p>Pratiquez en Ã©crivant et en exÃ©cutant votre propre code avec des exercices guidÃ©s</p>
            <div class="mc-pill">Exercices pratiques</div>
          </div>
          <div class="mode-card quiz-c" id="quiz-mode-card" onclick="startQuiz(null)">
            <div class="mc-ico">ğŸ¯</div>
            <h3>Quiz</h3>
            <p>Testez vos connaissances avec des questions variÃ©es â€” jamais les mÃªmes deux fois</p>
            <div class="mc-pill" id="quiz-lock-pill">Lisez le cours d'abord</div>
          </div>
        </div>
      </div>

      <!-- THEORY -->
      <div class="view" id="view-theory">
        <div class="theory-shell">
          <div class="theory-topbar">
            <button class="back-btn" onclick="showView('unit')">â† Retour</button>
            <div class="chapter-prog">
              <div class="ch-prog-label" id="ch-prog-label">Chapitre 1/1</div>
              <div class="ch-prog-dots" id="ch-prog-dots"></div>
            </div>
          </div>
          <div id="theory-content"></div>
          <div class="theory-nav" id="theory-nav"></div>
        </div>
      </div>

      <!-- SANDBOX -->
      <div class="view" id="view-sandbox">
        <div class="sandbox-shell">
          <div class="sandbox-header">
            <button class="back-btn" onclick="showView('unit')">â† Retour</button>
            <div class="lesson-meta"><h2 id="sandbox-title">Sandbox</h2><p>Ã‰crivez et testez votre code</p></div>
          </div>
          <div class="sandbox-body">
            <div class="sandbox-panel">
              <div class="sp-header">
                <span class="sp-title" id="sb-lang-label">Python</span>
                <div class="sp-actions">
                  <button class="sp-btn reset" onclick="resetEditor()">â†º Reset</button>
                  <button class="sp-btn run" onclick="runCode()">â–¶ ExÃ©cuter</button>
                </div>
              </div>
              <textarea class="code-editor" id="code-editor" spellcheck="false"></textarea>
            </div>
            <div class="sandbox-panel">
              <div class="sp-header">
                <span class="sp-title">Sortie</span>
                <button class="sp-btn" onclick="clearOutput()">Effacer</button>
              </div>
              <div class="output-area" id="output-area">
                <span class="out-info">Cliquez â–¶ ExÃ©cuter pour voir le rÃ©sultatâ€¦</span>
              </div>
            </div>
          </div>
          <div class="sandbox-exercises">
            <div class="ex-title">Exercices guidÃ©s</div>
            <div class="ex-list" id="ex-list"></div>
          </div>
        </div>
      </div>

      <!-- QUIZ -->
      <div class="view" id="view-quiz">
        <div class="quiz-shell">
          <div class="quiz-topbar">
            <button class="back-btn" onclick="exitQuiz()">âœ•</button>
            <div class="q-prog-wrap"><div class="q-prog-track"><div class="q-prog-fill" id="q-prog" style="width:0%"></div></div></div>
            <div class="q-counter" id="q-ctr">1/5</div>
            <div class="inf-badge">â™¾ï¸ Sans limite</div>
          </div>
          <div class="quiz-card">
            <div class="q-pill" id="q-pill">QCM</div>
            <div class="q-txt" id="q-txt"></div>
            <div class="q-code" id="q-code" style="display:none"></div>
            <div id="q-opts"></div>
            <div class="feedback" id="q-fb">
              <span class="fb-ico" id="fb-ico"></span>
              <div class="fb-body"><strong id="fb-title"></strong><span id="fb-det"></span></div>
            </div>
            <div class="quiz-acts">
              <button class="q-btn skip" id="skip-btn" onclick="skipQ()">Passer</button>
              <button class="q-btn primary" id="submit-btn" onclick="handleSubmit()" disabled>VÃ©rifier</button>
            </div>
          </div>
        </div>
      </div>

      <!-- RESULTS -->
      <div class="view" id="view-results">
        <div class="results-wrap">
          <span class="res-trophy" id="res-trophy">ğŸ‰</span>
          <div class="res-title" id="res-title">TerminÃ© !</div>
          <div class="res-sub" id="res-sub"></div>
          <div class="res-stats">
            <div class="r-stat"><div class="rv" id="rv-xp" style="color:var(--a4)">+0</div><div class="rl">XP</div></div>
            <div class="r-stat"><div class="rv" id="rv-acc" style="color:var(--a)">0%</div><div class="rl">PrÃ©cision</div></div>
            <div class="r-stat"><div class="rv" id="rv-time" style="color:var(--a2)">0:00</div><div class="rl">Temps</div></div>
          </div>
          <div class="res-btns">
            <button class="r-btn main" onclick="showView('home')">ğŸ  Accueil</button>
            <button class="r-btn sec" onclick="replayQuiz()">ğŸ” Rejouer</button>
          </div>
        </div>
      </div>

      <!-- LEADERBOARD -->
      <div class="view" id="view-lb">
        <div class="lb-h"><h1>ğŸ† Classement</h1><span class="lb-badge">Cette semaine</span></div>
        <div class="lb-rows" id="lb-rows"></div>
      </div>

      <!-- PROFILE -->
      <div class="view" id="view-profile">
        <div class="p-top">
          <div class="p-ava" id="p-ava">ğŸ§‘</div>
          <div class="p-inf">
            <h2 id="p-name">â€”</h2>
            <div class="p-email" id="p-email">â€”</div>
            <div class="p-cloud">â˜ï¸ DonnÃ©es sauvegardÃ©es sur Firebase</div>
          </div>
        </div>
        <div class="p-stats">
          <div class="ps"><div class="pv" id="ps-xp" style="color:var(--a4)">0</div><div class="pl">Total XP</div></div>
          <div class="ps"><div class="pv" id="ps-str" style="color:#fb923c">ğŸ”¥0</div><div class="pl">SÃ©rie</div></div>
          <div class="ps"><div class="pv" id="ps-les" style="color:var(--a)">0</div><div class="pl">LeÃ§ons</div></div>
          <div class="ps"><div class="pv" id="ps-acc" style="color:var(--a2)">0%</div><div class="pl">PrÃ©cision</div></div>
        </div>
        <div class="sec-h" style="margin-bottom:.8rem">SuccÃ¨s</div>
        <div class="ach-g" id="ach-grid"></div>
      </div>

    </div>
  </div>
</div>
<div class="toast" id="toast"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONTENT DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const AVATARS=['ğŸ§‘','ğŸ‘¨â€ğŸ’»','ğŸ‘©â€ğŸ’»','ğŸ§‘â€ğŸ’»','ğŸ¦Š','ğŸ‰','ğŸ¤–','ğŸ®','âš¡','ğŸŒŸ','ğŸ§™','ğŸ‘¾'];
let selAva=AVATARS[0];

// â”€â”€ COURSES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const COURSES=[
  {id:'python',name:'Python',icon:'ğŸ',color:'#5eead4',desc:'Variables, boucles, fonctions, POO',badge:'Populaire',
   units:[
    {id:'py-var', icon:'ğŸ“¦',name:'Variables & Types',     desc:'int, str, float, bool, type()',xp:10},
    {id:'py-cond',icon:'ğŸ”€',name:'Conditions if/else',    desc:'if, elif, else, opÃ©rateurs logiques',xp:10},
    {id:'py-loop',icon:'ğŸ”',name:'Boucles for & while',   desc:'range(), break, continue, enumerate',xp:15},
    {id:'py-func',icon:'âš™ï¸',name:'Fonctions',             desc:'def, return, *args, **kwargs, lambda',xp:15,locked:true},
    {id:'py-list',icon:'ğŸ“‹',name:'Listes & Tuples',       desc:'Indexing, slicing, list comprehensions',xp:20,locked:true},
    {id:'py-dict',icon:'ğŸ“–',name:'Dictionnaires',         desc:'ClÃ©s, valeurs, mÃ©thodes, parcours',xp:20,locked:true},
    {id:'py-oop', icon:'ğŸ›ï¸',name:'Classes & POO',        desc:'class, hÃ©ritage, __init__, mÃ©thodes',xp:25,locked:true},
   ]},
  {id:'javascript',name:'JavaScript',icon:'âš¡',color:'#fbbf24',desc:'ES6+, DOM, async/await, APIs',badge:null,
   units:[
    {id:'js-var', icon:'ğŸ“¦',name:'Variables & Types',     desc:'let, const, var, typeof, coercion',xp:10},
    {id:'js-func',icon:'ğŸ¯',name:'Fonctions & Arrow',     desc:'function, =>, callbacks, scope, closure',xp:15},
    {id:'js-dom', icon:'ğŸŒ',name:'DOM & Ã‰vÃ©nements',      desc:'querySelector, addEventListener, classList',xp:20,locked:true},
    {id:'js-async',icon:'ğŸ”„',name:'Async / Await',        desc:'Promise, fetch, try/catch, API REST',xp:25,locked:true},
   ]},
  {id:'java',name:'Java',icon:'â˜•',color:'#e76f51',desc:'Types forts, POO, Collections, JVM',badge:'Complet',
   units:[
    {id:'jv-base',icon:'ğŸ–¥ï¸',name:'Syntaxe de base',      desc:'System.out, types primitifs, String',xp:10},
    {id:'jv-class',icon:'ğŸ›ï¸',name:'Classes & Objets',    desc:'class, new, constructeur, this, static',xp:15},
    {id:'jv-inh', icon:'ğŸ”—',name:'HÃ©ritage & Polymorphisme',desc:'extends, super, @Override, abstract',xp:20,locked:true},
    {id:'jv-coll',icon:'ğŸ“š',name:'Collections & Generics',desc:'ArrayList, HashMap, for-each, Iterator',xp:20,locked:true},
    {id:'jv-exc', icon:'âš ï¸',name:'Exceptions',            desc:'try, catch, finally, throws, custom',xp:15,locked:true},
   ]},
  {id:'html',name:'HTML/CSS',icon:'ğŸŒ',color:'#f472b6',desc:'Structure, styles, Flexbox, Grid, animations',badge:'Facile',
   units:[
    {id:'ht-base',icon:'ğŸ—ï¸',name:'Balises HTML',         desc:'Structure, sÃ©mantique, attributs, formulaires',xp:10},
    {id:'ht-css', icon:'ğŸ¨',name:'CSS Fondamentaux',      desc:'SÃ©lecteurs, box model, couleurs, polices',xp:10},
    {id:'ht-flex',icon:'ğŸ“',name:'Flexbox',               desc:'display:flex, justify-content, align-items',xp:15,locked:true},
    {id:'ht-grid',icon:'ğŸ”²',name:'CSS Grid',              desc:'grid-template, areas, auto-fill, gaps',xp:15,locked:true},
   ]},
  {id:'linux',name:'Linux/Ubuntu',icon:'ğŸ§',color:'#a78bfa',desc:'Terminal, Bash scripts, rÃ©seau, services',badge:'Nouveau',
   units:[
    {id:'lx-term',icon:'ğŸ’»',name:'Terminal Basics',       desc:'ls, cd, pwd, mkdir, rm, cp, mv, man',xp:10},
    {id:'lx-perm',icon:'ğŸ”’',name:'Fichiers & Permissions',desc:'chmod, chown, cat, nano, grep, find',xp:15},
    {id:'lx-bash',icon:'âš¡',name:'Bash Scripting',        desc:'Variables, conditions, boucles, fonctions',xp:20,locked:true},
    {id:'lx-apt', icon:'ğŸ“¦',name:'APT & Paquets',         desc:'install, update, upgrade, remove, search',xp:10,locked:true},
   ]},
  {id:'minecraft',name:'Minecraft Mods',icon:'â›ï¸',color:'#5eab3c',desc:'Forge, items, blocs, events, datapacks',badge:'Fun !',
   units:[
    {id:'mc-env', icon:'ğŸ› ï¸',name:'Environnement de Dev', desc:'JDK, Forge MDK, IntelliJ IDEA, Gradle',xp:15},
    {id:'mc-item',icon:'ğŸ’',name:'CrÃ©er des Items',       desc:'Item class, registry, modÃ¨le JSON, texture',xp:20},
    {id:'mc-block',icon:'ğŸ§±',name:'CrÃ©er des Blocs',      desc:'Block class, propriÃ©tÃ©s, loot tables, drops',xp:20,locked:true},
    {id:'mc-event',icon:'ğŸ®',name:'Ã‰vÃ©nements & Handlers',desc:'@SubscribeEvent, PlayerEvent, TickEvent',xp:25,locked:true},
    {id:'mc-rp',  icon:'ğŸ¨',name:'Resource Packs',        desc:'Textures PNG 16x16, sounds.json, lang',xp:15,locked:true},
    {id:'mc-dp',  icon:'ğŸ“œ',name:'Datapacks',             desc:'.mcfunction, advancements, loot_tables',xp:15,locked:true},
   ]},
  {id:'wow',name:'WoW Add-ons',icon:'ğŸ§™',color:'#c79a3e',desc:'Lua, API Blizzard, Frames, Events',badge:'MMO',
   units:[
    {id:'wo-lua', icon:'ğŸ“œ',name:'Lua Fondamentaux',      desc:'Variables, tables, fonctions, mÃ©tatable',xp:15},
    {id:'wo-toc', icon:'ğŸ“‹',name:'Structure Add-on',      desc:'.toc metadata, ordre de chargement',xp:15},
    {id:'wo-frame',icon:'ğŸ–¼ï¸',name:'Frames & UI',         desc:'CreateFrame, SetPoint, SetSize, texture',xp:20,locked:true},
    {id:'wo-event',icon:'âš¡',name:'Ã‰vÃ©nements WoW',       desc:'RegisterEvent, COMBAT_LOG, PLAYER_LOGIN',xp:20,locked:true},
    {id:'wo-api', icon:'ğŸ”®',name:'API Blizzard',          desc:'UnitHealth, GetSpellInfo, C_Item',xp:25,locked:true},
   ]},
  {id:'git',name:'Git & GitHub',icon:'ğŸŒ¿',color:'#f9a8d4',desc:'Versioning, branches, PRs, CI/CD',badge:null,
   units:[
    {id:'gt-init',icon:'ğŸ“',name:'Init & Commit',         desc:'git init, add, commit, status, log, diff',xp:10},
    {id:'gt-br',  icon:'ğŸŒ¿',name:'Branches & Merge',      desc:'branch, checkout, merge, rebase, conflicts',xp:15,locked:true},
    {id:'gt-remote',icon:'ğŸŒ',name:'GitHub & Remote',     desc:'remote, push, pull, clone, fork, PR',xp:15,locked:true},
   ]},
];

// â”€â”€ THEORY CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const THEORY = {
  'py-var': {
    title:'Variables & Types en Python',
    chapters:[
      {
        title:'Qu\'est-ce qu\'une variable ?',
        content:`
<p>Une <strong>variable</strong> est une boÃ®te nommÃ©e qui stocke une valeur en mÃ©moire. En Python, vous crÃ©ez une variable simplement en lui assignant une valeur â€” pas besoin de dÃ©clarer le type !</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># CrÃ©ation de variables</span>
<span class="kw">nom</span> = <span class="str">"Alice"</span>          <span class="cm"># str (chaÃ®ne de texte)</span>
<span class="kw">age</span> = <span class="num">25</span>               <span class="cm"># int (entier)</span>
<span class="kw">taille</span> = <span class="num">1.68</span>          <span class="cm"># float (dÃ©cimal)</span>
<span class="kw">est_etudiant</span> = <span class="kw">True</span>   <span class="cm"># bool (boolÃ©en)</span>

<span class="fn">print</span>(nom)    <span class="cm"># Affiche: Alice</span>
<span class="fn">print</span>(age)    <span class="cm"># Affiche: 25</span></div>
<div class="tip">ğŸ’¡ En Python, le nom de variable est sensible Ã  la casse : <code>Age</code> et <code>age</code> sont deux variables diffÃ©rentes !</div>
<h3>Les 4 types de base</h3>
<ul>
  <li><strong>int</strong> â€” Nombres entiers : <code>42</code>, <code>-7</code>, <code>0</code></li>
  <li><strong>float</strong> â€” Nombres dÃ©cimaux : <code>3.14</code>, <code>-0.5</code>, <code>2.0</code></li>
  <li><strong>str</strong> â€” Texte entre guillemets : <code>"Bonjour"</code>, <code>'Hello'</code></li>
  <li><strong>bool</strong> â€” Vrai ou faux : <code>True</code>, <code>False</code></li>
</ul>`
      },
      {
        title:'OpÃ©rations et conversion de types',
        content:`
<h3>OpÃ©rations arithmÃ©tiques</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>a = <span class="num">10</span>
b = <span class="num">3</span>

<span class="fn">print</span>(a <span class="op">+</span> b)    <span class="cm"># Addition:      13</span>
<span class="fn">print</span>(a <span class="op">-</span> b)    <span class="cm"># Soustraction:  7</span>
<span class="fn">print</span>(a <span class="op">*</span> b)    <span class="cm"># Multiplication: 30</span>
<span class="fn">print</span>(a <span class="op">/</span> b)    <span class="cm"># Division:      3.333...</span>
<span class="fn">print</span>(a <span class="op">//</span> b)   <span class="cm"># Division entiÃ¨re: 3</span>
<span class="fn">print</span>(a <span class="op">%</span> b)    <span class="cm"># Modulo (reste): 1</span>
<span class="fn">print</span>(a <span class="op">**</span> b)   <span class="cm"># Puissance:     1000</span></div>
<h3>Convertir un type (casting)</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>age_texte = <span class="str">"25"</span>
age_entier = <span class="fn">int</span>(age_texte)   <span class="cm"># str â†’ int</span>
prix = <span class="fn">float</span>(<span class="str">"9.99"</span>)         <span class="cm"># str â†’ float</span>
texte = <span class="fn">str</span>(<span class="num">42</span>)               <span class="cm"># int â†’ str</span>

<span class="fn">print</span>(<span class="fn">type</span>(age_entier))  <span class="cm"># &lt;class 'int'&gt;</span>
<span class="fn">print</span>(<span class="fn">type</span>(prix))        <span class="cm"># &lt;class 'float'&gt;</span></div>
<div class="warn">âš ï¸ <code>int("abc")</code> provoque une erreur ! On ne peut convertir que des valeurs compatibles.</div>`
      },
      {
        title:'f-strings et affichage',
        content:`
<p>Les <strong>f-strings</strong> (format strings) sont la faÃ§on moderne et Ã©lÃ©gante d'insÃ©rer des variables dans du texte en Python.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>prenom = <span class="str">"Bob"</span>
age = <span class="num">30</span>
taille = <span class="num">1.75</span>

<span class="cm"># MÃ©thode classique (vieux style)</span>
<span class="fn">print</span>(<span class="str">"Je m'appelle"</span>, prenom, <span class="str">"et j'ai"</span>, age, <span class="str">"ans"</span>)

<span class="cm"># f-string (Python 3.6+) â€” recommandÃ© !</span>
<span class="fn">print</span>(<span class="str">f"Je m'appelle <span class="op">{prenom}</span> et j'ai <span class="op">{age}</span> ans"</span>)
<span class="fn">print</span>(<span class="str">f"Taille: <span class="op">{taille:.2f}</span>m"</span>)  <span class="cm"># 2 dÃ©cimales: 1.75m</span>
<span class="fn">print</span>(<span class="str">f"Double: <span class="op">{age * 2}</span>"</span>)      <span class="cm"># Calcul dans le f-string</span></div>
<div class="tip">ğŸ’¡ Le <code>f</code> devant les guillemets active le mode f-string. Tout ce qui est entre <code>{}</code> est Ã©valuÃ© comme du Python !</div>
<h3>EntrÃ©e utilisateur</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># input() retourne TOUJOURS une str</span>
nom = <span class="fn">input</span>(<span class="str">"Votre prÃ©nom : "</span>)
age = <span class="fn">int</span>(<span class="fn">input</span>(<span class="str">"Votre Ã¢ge : "</span>))  <span class="cm"># Convertir en int</span>
<span class="fn">print</span>(<span class="str">f"Bonjour {nom}, vous avez {age} ans !"</span>)</div>`
      }
    ]
  },
  'py-loop': {
    title:'Boucles for & while en Python',
    chapters:[
      {
        title:'La boucle for et range()',
        content:`
<p>La boucle <code>for</code> rÃ©pÃ¨te un bloc de code pour chaque Ã©lÃ©ment d'une sÃ©quence. C'est la boucle la plus utilisÃ©e en Python.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># range(stop) â†’ 0, 1, 2, ..., stop-1</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">5</span>):
    <span class="fn">print</span>(i)   <span class="cm"># Affiche 0, 1, 2, 3, 4</span>

<span class="cm"># range(start, stop)</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">1</span>, <span class="num">6</span>):
    <span class="fn">print</span>(i)   <span class="cm"># Affiche 1, 2, 3, 4, 5</span>

<span class="cm"># range(start, stop, step) â€” pas de 2</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">0</span>, <span class="num">11</span>, <span class="num">2</span>):
    <span class="fn">print</span>(i)   <span class="cm"># Affiche 0, 2, 4, 6, 8, 10</span></div>
<h3>ItÃ©rer sur une liste</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>fruits = [<span class="str">"pomme"</span>, <span class="str">"banane"</span>, <span class="str">"cerise"</span>]

<span class="kw">for</span> fruit <span class="kw">in</span> fruits:
    <span class="fn">print</span>(<span class="str">f"J'aime les {fruit}s"</span>)

<span class="cm"># enumerate() donne l'index ET la valeur</span>
<span class="kw">for</span> i, fruit <span class="kw">in</span> <span class="fn">enumerate</span>(fruits):
    <span class="fn">print</span>(<span class="str">f"{i}: {fruit}"</span>)</div>`
      },
      {
        title:'La boucle while et les contrÃ´les',
        content:`
<p>La boucle <code>while</code> continue tant qu'une condition est vraie. IdÃ©ale quand on ne sait pas Ã  l'avance combien d'itÃ©rations on aura.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>compteur = <span class="num">0</span>

<span class="kw">while</span> compteur <span class="op">&lt;</span> <span class="num">5</span>:
    <span class="fn">print</span>(<span class="str">f"Compteur: {compteur}"</span>)
    compteur <span class="op">+=</span> <span class="num">1</span>   <span class="cm"># IMPORTANT: incrÃ©menter !</span>

<span class="cm"># RÃ©sultat: 0, 1, 2, 3, 4</span></div>
<div class="warn">âš ï¸ Oublier d'incrÃ©menter le compteur crÃ©e une boucle infinie ! Utilisez Ctrl+C pour arrÃªter le programme.</div>
<h3>break et continue</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># break : quitte la boucle immÃ©diatement</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">10</span>):
    <span class="kw">if</span> i <span class="op">==</span> <span class="num">5</span>:
        <span class="kw">break</span>
    <span class="fn">print</span>(i)   <span class="cm"># Affiche 0, 1, 2, 3, 4</span>

<span class="cm"># continue : passe Ã  l'itÃ©ration suivante</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">6</span>):
    <span class="kw">if</span> i <span class="op">%</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span>:
        <span class="kw">continue</span>
    <span class="fn">print</span>(i)   <span class="cm"># Affiche 1, 3, 5 (impairs seulement)</span></div>`
      }
    ]
  },
  'jv-base': {
    title:'Syntaxe de base Java',
    chapters:[
      {
        title:'Hello World et structure d\'un programme Java',
        content:`
<p>Java est un langage <strong>fortement typÃ©</strong> et <strong>orientÃ© objet</strong>. Tout le code doit Ãªtre dans une classe. Voici la structure minimale :</p>
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">public class</span> <span class="cls">HelloWorld</span> {
    <span class="cm">// Point d'entrÃ©e du programme</span>
    <span class="kw">public static void</span> <span class="fn">main</span>(String[] args) {
        System.out.<span class="fn">println</span>(<span class="str">"Hello, World!"</span>);
        System.out.<span class="fn">println</span>(<span class="str">"Bonjour Java !"</span>);
    }
}</div>
<div class="note">â„¹ï¸ Le nom du fichier doit Ãªtre identique au nom de la classe : <code>HelloWorld.java</code></div>
<h3>Types primitifs Java</h3>
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">int</span> age = <span class="num">25</span>;              <span class="cm">// Entier (-2Â³Â¹ Ã  2Â³Â¹-1)</span>
<span class="kw">long</span> population = <span class="num">8000000000L</span>; <span class="cm">// Grand entier</span>
<span class="kw">double</span> pi = <span class="num">3.14159</span>;        <span class="cm">// DÃ©cimal prÃ©cis</span>
<span class="kw">float</span> prix = <span class="num">9.99f</span>;         <span class="cm">// DÃ©cimal (moins prÃ©cis)</span>
<span class="kw">boolean</span> actif = <span class="kw">true</span>;       <span class="cm">// Vrai ou faux</span>
<span class="kw">char</span> lettre = <span class="str">'A'</span>;          <span class="cm">// Un seul caractÃ¨re</span>
<span class="cls">String</span> nom = <span class="str">"Alice"</span>;       <span class="cm">// Texte (objet, pas primitif !)</span></div>`
      },
      {
        title:'OpÃ©rations et affichage en Java',
        content:`
<h3>OpÃ©rations arithmÃ©tiques</h3>
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">int</span> a = <span class="num">10</span>, b = <span class="num">3</span>;

System.out.<span class="fn">println</span>(a + b);   <span class="cm">// 13</span>
System.out.<span class="fn">println</span>(a - b);   <span class="cm">// 7</span>
System.out.<span class="fn">println</span>(a * b);   <span class="cm">// 30</span>
System.out.<span class="fn">println</span>(a / b);   <span class="cm">// 3  (division entiÃ¨re !)</span>
System.out.<span class="fn">println</span>(a % b);   <span class="cm">// 1  (modulo)</span>
System.out.<span class="fn">println</span>(<span class="fn">Math.pow</span>(a, b)); <span class="cm">// 1000.0</span></div>
<h3>Affichage formatÃ©</h3>
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cls">String</span> prenom = <span class="str">"Bob"</span>;
<span class="kw">int</span> age = <span class="num">30</span>;
<span class="kw">double</span> note = <span class="num">18.5</span>;

<span class="cm">// ConcatÃ©nation avec +</span>
System.out.<span class="fn">println</span>(<span class="str">"Bonjour "</span> + prenom + <span class="str">", age: "</span> + age);

<span class="cm">// printf avec formatage</span>
System.out.<span class="fn">printf</span>(<span class="str">"PrÃ©nom: %s, Age: %d, Note: %.1f%n"</span>, prenom, age, note);

<span class="cm">// String.format (retourne une String)</span>
<span class="cls">String</span> msg = <span class="cls">String</span>.<span class="fn">format</span>(<span class="str">"Bonjour %s !"</span>, prenom);
System.out.<span class="fn">println</span>(msg);</div>
<div class="tip">ğŸ’¡ <code>%s</code>=texte, <code>%d</code>=entier, <code>%.2f</code>=dÃ©cimal 2 chiffres, <code>%n</code>=retour Ã  la ligne</div>`
      }
    ]
  },
  'lx-term': {
    title:'Terminal Linux â€” Les bases',
    chapters:[
      {
        title:'Navigation dans le systÃ¨me de fichiers',
        content:`
<p>Le <strong>terminal</strong> (ou shell) est l'interface en ligne de commande de Linux. MaÃ®triser la navigation est la premiÃ¨re Ã©tape essentielle.</p>
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># pwd â€” Print Working Directory (oÃ¹ suis-je ?)</span>
<span class="fn">pwd</span>
<span class="cm"># RÃ©sultat: /home/utilisateur</span>

<span class="cm"># ls â€” List (lister les fichiers)</span>
<span class="fn">ls</span>              <span class="cm"># Liste simple</span>
<span class="fn">ls</span> <span class="at">-l</span>           <span class="cm"># Liste dÃ©taillÃ©e (permissions, taille, date)</span>
<span class="fn">ls</span> <span class="at">-la</span>          <span class="cm"># Inclut les fichiers cachÃ©s (commenÃ§ant par .)</span>
<span class="fn">ls</span> <span class="at">-lh</span>          <span class="cm"># Tailles lisibles (Ko, Mo, Go)</span>

<span class="cm"># cd â€” Change Directory (naviguer)</span>
<span class="fn">cd</span> Documents    <span class="cm"># Aller dans Documents</span>
<span class="fn">cd</span> ..           <span class="cm"># Remonter d'un niveau</span>
<span class="fn">cd</span> ~            <span class="cm"># Aller au rÃ©pertoire home</span>
<span class="fn">cd</span> /            <span class="cm"># Aller Ã  la racine du systÃ¨me</span>
<span class="fn">cd</span> -            <span class="cm"># Revenir au dossier prÃ©cÃ©dent</span></div>
<div class="tip">ğŸ’¡ Utilisez la touche <kbd>Tab</kbd> pour l'autocomplÃ©tion des noms de fichiers/dossiers !</div>`
      },
      {
        title:'CrÃ©er, copier, dÃ©placer et supprimer',
        content:`
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># mkdir â€” CrÃ©er un dossier</span>
<span class="fn">mkdir</span> mon_projet
<span class="fn">mkdir</span> <span class="at">-p</span> projet/src/utils   <span class="cm"># CrÃ©e les parents si nÃ©cessaire</span>

<span class="cm"># touch â€” CrÃ©er un fichier vide</span>
<span class="fn">touch</span> readme.txt
<span class="fn">touch</span> index.html style.css   <span class="cm"># Plusieurs fichiers Ã  la fois</span>

<span class="cm"># cp â€” Copier</span>
<span class="fn">cp</span> fichier.txt copie.txt
<span class="fn">cp</span> <span class="at">-r</span> dossier/ dossier_copie/   <span class="cm"># -r pour copier un dossier</span>

<span class="cm"># mv â€” DÃ©placer / Renommer</span>
<span class="fn">mv</span> ancien.txt nouveau.txt      <span class="cm"># Renommer</span>
<span class="fn">mv</span> fichier.txt ~/Documents/    <span class="cm"># DÃ©placer</span>

<span class="cm"># rm â€” Supprimer</span>
<span class="fn">rm</span> fichier.txt
<span class="fn">rm</span> <span class="at">-r</span> dossier/               <span class="cm"># Supprimer un dossier rÃ©cursivement</span>
<span class="fn">rm</span> <span class="at">-rf</span> dossier/              <span class="cm"># Force (sans confirmation)</span></div>
<div class="warn">âš ï¸ <code>rm -rf</code> est IRRÃ‰VERSIBLE ! Il n'y a pas de corbeille. VÃ©rifiez deux fois avant d'exÃ©cuter.</div>
<h3>Lire des fichiers</h3>
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="fn">cat</span> fichier.txt          <span class="cm"># Affiche tout le contenu</span>
<span class="fn">less</span> fichier.txt         <span class="cm"># Affiche page par page (q pour quitter)</span>
<span class="fn">head</span> <span class="at">-n 10</span> fichier.txt   <span class="cm"># 10 premiÃ¨res lignes</span>
<span class="fn">tail</span> <span class="at">-n 10</span> fichier.txt   <span class="cm"># 10 derniÃ¨res lignes</span>
<span class="fn">grep</span> <span class="str">"mot"</span> fichier.txt   <span class="cm"># Chercher "mot" dans le fichier</span></div>`
      }
    ]
  },
  'mc-env': {
    title:'Environnement de dÃ©veloppement Minecraft',
    chapters:[
      {
        title:'Choisir son loader : Forge vs Fabric',
        content:`
<p>Pour crÃ©er des mods Minecraft, vous avez besoin d'un <strong>mod loader</strong> â€” un framework qui permet d'injecter votre code dans le jeu.</p>
<h3>Forge</h3>
<ul>
  <li>âœ… Le plus ancien et le plus utilisÃ© (depuis 2012)</li>
  <li>âœ… Ã‰norme Ã©cosystÃ¨me de mods existants</li>
  <li>âœ… Documentation abondante</li>
  <li>âš ï¸ Se met Ã  jour plus lentement aprÃ¨s chaque nouvelle version Minecraft</li>
</ul>
<h3>Fabric</h3>
<ul>
  <li>âœ… Plus lÃ©ger et moderne (depuis 2019)</li>
  <li>âœ… Se met Ã  jour trÃ¨s rapidement</li>
  <li>âœ… API plus propre pour les dÃ©veloppeurs</li>
  <li>âš ï¸ Moins de mods dans l'Ã©cosystÃ¨me</li>
</ul>
<div class="tip">ğŸ’¡ Pour Minecraft 1.20+, les deux sont bons. Ce cours utilise <strong>Forge</strong> car il a plus de ressources d'apprentissage.</div>
<h3>PrÃ©requis Ã  installer</h3>
<div class="codeblock"><span class="cb-lang">Setup</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>1. JDK 17 (Java Development Kit)
   â†’ https://adoptium.net/

2. IntelliJ IDEA Community (gratuit)
   â†’ https://www.jetbrains.com/idea/

3. Forge MDK (Mod Development Kit)
   â†’ https://files.minecraftforge.net/
   â†’ Choisissez la version Minecraft souhaitÃ©e</div>`
      },
      {
        title:'CrÃ©er son premier projet Forge',
        content:`
<h3>Structure du projet aprÃ¨s extraction du MDK</h3>
<div class="codeblock"><span class="cb-lang">Structure</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>mon_mod/
â”œâ”€â”€ src/main/java/com/monnom/monmod/
â”‚   â””â”€â”€ MonMod.java          â† Classe principale
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ META-INF/
â”‚   â”‚   â””â”€â”€ mods.toml        â† MÃ©tadonnÃ©es du mod
â”‚   â””â”€â”€ pack.mcmeta
â”œâ”€â”€ build.gradle             â† Configuration Gradle
â””â”€â”€ gradle.properties        â† PropriÃ©tÃ©s (version, etc.)</div>
<h3>La classe principale du mod</h3>
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="at">@Mod</span>(<span class="str">"monmod"</span>)    <span class="cm">// ID unique de votre mod</span>
<span class="kw">public class</span> <span class="cls">MonMod</span> {
    <span class="kw">public static final</span> <span class="cls">String</span> MOD_ID = <span class="str">"monmod"</span>;

    <span class="kw">public</span> <span class="cls">MonMod</span>() {
        <span class="cm">// Enregistrement des Ã©vÃ©nements</span>
        <span class="cls">IEventBus</span> bus = <span class="cls">FMLJavaModLoadingContext</span>.<span class="fn">get</span>()
                          .<span class="fn">getModEventBus</span>();

        <span class="cm">// Vos registrations ici</span>
        System.out.<span class="fn">println</span>(<span class="str">"Mon mod est chargÃ© !"</span>);
    }
}</div>
<h3>Le fichier mods.toml</h3>
<div class="codeblock"><span class="cb-lang">TOML</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>modLoader="javafml"
loaderVersion="[47,)"
license="MIT"

[[mods]]
modId="monmod"
version="1.0.0"
displayName="Mon Premier Mod"
description='''
  Un mod crÃ©Ã© avec CodeQuest !
'''

[[dependencies.monmod]]
    modId="forge"
    mandatory=true
    versionRange="[47,)"</div>`
      }
    ]
  },
  'wo-lua': {
    title:'Lua â€” Le langage des Add-ons WoW',
    chapters:[
      {
        title:'Bases du langage Lua',
        content:`
<p>Lua est un langage de script lÃ©ger, rapide et embarquÃ© dans World of Warcraft. Tous les add-ons WoW sont Ã©crits en Lua.</p>
<div class="codeblock"><span class="cb-lang">Lua</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm">-- Commentaire sur une ligne (double tiret)</span>
<span class="cm">--[[ Commentaire
     multi-lignes ]]</span>

<span class="cm">-- Variables : local (recommandÃ©) ou global</span>
<span class="kw">local</span> prenom = <span class="str">"Thrall"</span>        <span class="cm">-- string</span>
<span class="kw">local</span> niveau = <span class="num">60</span>             <span class="cm">-- number</span>
<span class="kw">local</span> estEnVie = <span class="kw">true</span>         <span class="cm">-- boolean</span>
<span class="kw">local</span> rien = <span class="kw">nil</span>              <span class="cm">-- nil = absence de valeur</span>

<span class="cm">-- Affichage dans le chat WoW</span>
<span class="fn">print</span>(<span class="str">"Bonjour "</span> .. prenom)    <span class="cm">-- .. = concatÃ©nation</span>
<span class="fn">print</span>(<span class="str">"Niveau: "</span> .. niveau)</div>
<div class="tip">ğŸ’¡ En Lua, il n'y a qu'un seul type numÃ©rique : <code>number</code>. Pas de distinction int/float !</div>
<h3>Fonctions Lua</h3>
<div class="codeblock"><span class="cb-lang">Lua</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm">-- DÃ©claration de fonction</span>
<span class="kw">local function</span> <span class="fn">direBonjour</span>(nom)
    <span class="fn">print</span>(<span class="str">"Bienvenue, "</span> .. nom .. <span class="str">" !"</span>)
<span class="kw">end</span>

<span class="cm">-- Appel</span>
<span class="fn">direBonjour</span>(<span class="str">"Arthas"</span>)

<span class="cm">-- Fonction retournant plusieurs valeurs</span>
<span class="kw">local function</span> <span class="fn">stats</span>()
    <span class="kw">return</span> <span class="num">100</span>, <span class="num">250</span>, <span class="num">50</span>   <span class="cm">-- hp, mana, energie</span>
<span class="kw">end</span>

<span class="kw">local</span> hp, mana, energie = <span class="fn">stats</span>()
<span class="fn">print</span>(<span class="str">"HP: "</span> .. hp)</div>`
      },
      {
        title:'Tables Lua â€” La structure de donnÃ©es universelle',
        content:`
<p>Les <strong>tables</strong> sont la seule structure de donnÃ©es en Lua. Elles peuvent Ãªtre utilisÃ©es comme tableaux, dictionnaires, objets et modules !</p>
<div class="codeblock"><span class="cb-lang">Lua</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm">-- Table comme tableau (index commence Ã  1 en Lua !)</span>
<span class="kw">local</span> classes = {<span class="str">"Guerrier"</span>, <span class="str">"Mage"</span>, <span class="str">"PrÃªtre"</span>}
<span class="fn">print</span>(classes[<span class="num">1</span>])    <span class="cm">-- "Guerrier" (pas 0 !)</span>
<span class="fn">print</span>(<span class="op">#</span>classes)      <span class="cm">-- 3 (longueur)</span>

<span class="cm">-- Table comme dictionnaire</span>
<span class="kw">local</span> joueur = {
    nom = <span class="str">"Arthas"</span>,
    niveau = <span class="num">60</span>,
    classe = <span class="str">"Paladin"</span>,
    estEnVie = <span class="kw">false</span>
}
<span class="fn">print</span>(joueur.nom)         <span class="cm">-- "Arthas"</span>
<span class="fn">print</span>(joueur[<span class="str">"classe"</span>])  <span class="cm">-- "Paladin"</span>

<span class="cm">-- Parcourir une table</span>
<span class="kw">for</span> cle, valeur <span class="kw">in</span> <span class="fn">pairs</span>(joueur) <span class="kw">do</span>
    <span class="fn">print</span>(cle .. <span class="str">" = "</span> .. <span class="fn">tostring</span>(valeur))
<span class="kw">end</span></div>
<div class="note">â„¹ï¸ En Lua, les indices de tableau commencent Ã  <strong>1</strong>, pas 0 comme dans la plupart des langages !</div>`
      }
    ]
  },
};

// â”€â”€ QUIZ QUESTIONS BANK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Large bank per unit â€” randomized each ses,
  'py-cond': {
    title:'Conditions if/else en Python',
    chapters:[
      { title:'if, elif et else',
        content:`
<p>Les conditions permettent d'exÃ©cuter du code diffÃ©rent selon une situation. En Python, on utilise <code>if</code>, <code>elif</code> et <code>else</code>.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>age = 18

<span class="kw">if</span> age <span class="op">&lt;</span> <span class="num">13</span>:
    <span class="fn">print</span>(<span class="str">"Enfant"</span>)
<span class="kw">elif</span> age <span class="op">&lt;</span> <span class="num">18</span>:
    <span class="fn">print</span>(<span class="str">"Adolescent"</span>)
<span class="kw">else</span>:
    <span class="fn">print</span>(<span class="str">"Adulte"</span>)   <span class="cm"># AffichÃ© ici</span></div>
<div class="tip">ğŸ’¡ L'indentation (4 espaces) est OBLIGATOIRE en Python pour dÃ©limiter les blocs. Pas d'accolades !</div>
<h3>OpÃ©rateurs de comparaison</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>x = <span class="num">10</span>
<span class="fn">print</span>(x <span class="op">==</span> <span class="num">10</span>)   <span class="cm"># True  â€” Ã©gal</span>
<span class="fn">print</span>(x <span class="op">!=</span> <span class="num">5</span>)    <span class="cm"># True  â€” diffÃ©rent</span>
<span class="fn">print</span>(x <span class="op">&gt;</span> <span class="num">5</span>)     <span class="cm"># True  â€” supÃ©rieur</span>
<span class="fn">print</span>(x <span class="op">&lt;</span> <span class="num">5</span>)     <span class="cm"># False â€” infÃ©rieur</span>
<span class="fn">print</span>(x <span class="op">&gt;=</span> <span class="num">10</span>)   <span class="cm"># True  â€” supÃ©rieur ou Ã©gal</span>
<span class="fn">print</span>(x <span class="op">&lt;=</span> <span class="num">9</span>)    <span class="cm"># False â€” infÃ©rieur ou Ã©gal</span></div>`
      },
      { title:'OpÃ©rateurs logiques et conditions avancÃ©es',
        content:`
<h3>and, or, not</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>age = <span class="num">20</span>
permis = <span class="kw">True</span>

<span class="cm"># and : les DEUX conditions doivent Ãªtre vraies</span>
<span class="kw">if</span> age <span class="op">&gt;=</span> <span class="num">18</span> <span class="kw">and</span> permis:
    <span class="fn">print</span>(<span class="str">"Peut conduire"</span>)

<span class="cm"># or : AU MOINS UNE condition vraie</span>
<span class="kw">if</span> age <span class="op">&lt;</span> <span class="num">12</span> <span class="kw">or</span> age <span class="op">&gt;</span> <span class="num">65</span>:
    <span class="fn">print</span>(<span class="str">"Tarif rÃ©duit"</span>)

<span class="cm"># not : inverse la condition</span>
<span class="kw">if</span> <span class="kw">not</span> permis:
    <span class="fn">print</span>(<span class="str">"Pas de permis"</span>)</div>
<h3>Condition ternaire (sur une ligne)</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>note = <span class="num">14</span>
resultat = <span class="str">"ReÃ§u"</span> <span class="kw">if</span> note <span class="op">&gt;=</span> <span class="num">10</span> <span class="kw">else</span> <span class="str">"RecalÃ©"</span>
<span class="fn">print</span>(resultat)  <span class="cm"># ReÃ§u</span></div>
<div class="tip">ğŸ’¡ La condition ternaire est pratique pour les affectations simples, mais Ã©vitez-la si la logique est complexe.</div>`
      }
    ]
  },
  'py-func': {
    title:'Fonctions en Python',
    chapters:[
      { title:'DÃ©finir et appeler une fonction',
        content:`
<p>Une fonction est un bloc de code rÃ©utilisable qu'on nomme et qu'on peut appeler autant de fois qu'on veut.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># DÃ©finition avec def</span>
<span class="kw">def</span> <span class="fn">dire_bonjour</span>(prenom):
    <span class="fn">print</span>(<span class="str">f"Bonjour {prenom} !"</span>)

<span class="cm"># Appel</span>
<span class="fn">dire_bonjour</span>(<span class="str">"Alice"</span>)
<span class="fn">dire_bonjour</span>(<span class="str">"Bob"</span>)

<span class="cm"># Fonction avec valeur de retour</span>
<span class="kw">def</span> <span class="fn">additionner</span>(a, b):
    <span class="kw">return</span> a + b

resultat = <span class="fn">additionner</span>(<span class="num">3</span>, <span class="num">5</span>)
<span class="fn">print</span>(resultat)  <span class="cm"># 8</span></div>
<div class="tip">ğŸ’¡ Une fonction sans <code>return</code> retourne automatiquement <code>None</code>.</div>`
      },
      { title:'ParamÃ¨tres par dÃ©faut et *args',
        content:`
<h3>Valeurs par dÃ©faut</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">def</span> <span class="fn">saluer</span>(prenom, langue=<span class="str">"fr"</span>):
    <span class="kw">if</span> langue == <span class="str">"fr"</span>:
        <span class="fn">print</span>(<span class="str">f"Bonjour {prenom}"</span>)
    <span class="kw">else</span>:
        <span class="fn">print</span>(<span class="str">f"Hello {prenom}"</span>)

<span class="fn">saluer</span>(<span class="str">"Alice"</span>)           <span class="cm"># Bonjour Alice</span>
<span class="fn">saluer</span>(<span class="str">"Bob"</span>, <span class="str">"en"</span>)      <span class="cm"># Hello Bob</span></div>
<h3>*args â€” nombre variable d'arguments</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">def</span> <span class="fn">somme</span>(<span class="op">*</span>nombres):
    total = <span class="num">0</span>
    <span class="kw">for</span> n <span class="kw">in</span> nombres:
        total += n
    <span class="kw">return</span> total

<span class="fn">print</span>(<span class="fn">somme</span>(<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>))        <span class="cm"># 6</span>
<span class="fn">print</span>(<span class="fn">somme</span>(<span class="num">10</span>, <span class="num">20</span>, <span class="num">30</span>, <span class="num">40</span>)) <span class="cm"># 100</span></div>
<h3>Lambda â€” fonction anonyme</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>doubler = <span class="kw">lambda</span> x: x <span class="op">*</span> <span class="num">2</span>
<span class="fn">print</span>(<span class="fn">doubler</span>(<span class="num">5</span>))  <span class="cm"># 10</span></div>`
      }
    ]
  },
  'py-list': {
    title:'Listes & Tuples en Python',
    chapters:[
      { title:'CrÃ©er et manipuler une liste',
        content:`
<p>Une liste est une collection <strong>ordonnÃ©e et modifiable</strong> d'Ã©lÃ©ments. Elle peut contenir des types diffÃ©rents.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>fruits = [<span class="str">"pomme"</span>, <span class="str">"banane"</span>, <span class="str">"cerise"</span>]

<span class="cm"># AccÃ¨s par index (commence Ã  0)</span>
<span class="fn">print</span>(fruits[<span class="num">0</span>])    <span class="cm"># pomme</span>
<span class="fn">print</span>(fruits[<span class="num">-1</span>])   <span class="cm"># cerise (dernier)</span>

<span class="cm"># Modifier</span>
fruits[<span class="num">1</span>] = <span class="str">"mangue"</span>

<span class="cm"># Ajouter / Supprimer</span>
fruits.<span class="fn">append</span>(<span class="str">"kiwi"</span>)    <span class="cm"># Ajoute Ã  la fin</span>
fruits.<span class="fn">insert</span>(<span class="num">0</span>, <span class="str">"ananas"</span>) <span class="cm"># InsÃ¨re Ã  l'index 0</span>
fruits.<span class="fn">remove</span>(<span class="str">"pomme"</span>)   <span class="cm"># Supprime par valeur</span>
fruits.<span class="fn">pop</span>()             <span class="cm"># Supprime le dernier</span>

<span class="fn">print</span>(<span class="fn">len</span>(fruits))       <span class="cm"># Longueur</span></div>
<h3>Slicing (dÃ©coupage)</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>nombres = [<span class="num">0</span>, <span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>]
<span class="fn">print</span>(nombres[<span class="num">1</span>:<span class="num">4</span>])   <span class="cm"># [1, 2, 3]</span>
<span class="fn">print</span>(nombres[:<span class="num">3</span>])    <span class="cm"># [0, 1, 2]</span>
<span class="fn">print</span>(nombres[<span class="num">3</span>:])    <span class="cm"># [3, 4, 5]</span>
<span class="fn">print</span>(nombres[::<span class="num">2</span>])   <span class="cm"># [0, 2, 4] â€” un sur deux</span>
<span class="fn">print</span>(nombres[::<span class="op">-1</span>])  <span class="cm"># [5, 4, 3, 2, 1, 0] â€” inversÃ©</span></div>`
      },
      { title:'List comprehension et Tuples',
        content:`
<h3>List comprehension â€” la syntaxe Ã©lÃ©gante</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># Version longue</span>
carres = []
<span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">5</span>):
    carres.<span class="fn">append</span>(i <span class="op">**</span> <span class="num">2</span>)

<span class="cm"># Version list comprehension</span>
carres = [i <span class="op">**</span> <span class="num">2</span> <span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">5</span>)]
<span class="fn">print</span>(carres)  <span class="cm"># [0, 1, 4, 9, 16]</span>

<span class="cm"># Avec condition</span>
pairs = [x <span class="kw">for</span> x <span class="kw">in</span> <span class="fn">range</span>(<span class="num">10</span>) <span class="kw">if</span> x <span class="op">%</span> <span class="num">2</span> == <span class="num">0</span>]
<span class="fn">print</span>(pairs)   <span class="cm"># [0, 2, 4, 6, 8]</span></div>
<h3>Tuples â€” liste immuable</h3>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm"># Tuple = liste qu'on ne peut pas modifier</span>
point = (<span class="num">3</span>, <span class="num">5</span>)
x, y = point   <span class="cm"># DÃ©structuration</span>
<span class="fn">print</span>(x, y)    <span class="cm"># 3 5</span>

couleurs = (<span class="str">"rouge"</span>, <span class="str">"vert"</span>, <span class="str">"bleu"</span>)
<span class="fn">print</span>(couleurs[<span class="num">0</span>])  <span class="cm"># rouge</span>
<span class="cm"># couleurs[0] = "jaune"  â† ERREUR ! Immuable</span></div>
<div class="tip">ğŸ’¡ Utilisez les tuples pour des donnÃ©es qui ne doivent jamais changer : coordonnÃ©es GPS, constantes, clÃ©s de dictionnaire.</div>`
      }
    ]
  },
  'py-dict': {
    title:'Dictionnaires en Python',
    chapters:[
      { title:'CrÃ©er et accÃ©der Ã  un dictionnaire',
        content:`
<p>Un dictionnaire stocke des donnÃ©es sous forme de paires <strong>clÃ©: valeur</strong>. Parfait pour reprÃ©senter des objets.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>joueur = {
    <span class="str">"nom"</span>: <span class="str">"Alice"</span>,
    <span class="str">"niveau"</span>: <span class="num">42</span>,
    <span class="str">"vie"</span>: <span class="num">100</span>,
    <span class="str">"actif"</span>: <span class="kw">True</span>
}

<span class="cm"># AccÃ¨s</span>
<span class="fn">print</span>(joueur[<span class="str">"nom"</span>])          <span class="cm"># Alice</span>
<span class="fn">print</span>(joueur.<span class="fn">get</span>(<span class="str">"xp"</span>, <span class="num">0</span>))   <span class="cm"># 0 (valeur par dÃ©faut si absent)</span>

<span class="cm"># Modifier / Ajouter</span>
joueur[<span class="str">"vie"</span>] = <span class="num">80</span>
joueur[<span class="str">"xp"</span>] = <span class="num">500</span>

<span class="cm"># Supprimer</span>
<span class="kw">del</span> joueur[<span class="str">"actif"</span>]

<span class="cm"># VÃ©rifier si une clÃ© existe</span>
<span class="kw">if</span> <span class="str">"nom"</span> <span class="kw">in</span> joueur:
    <span class="fn">print</span>(<span class="str">"La clÃ© nom existe"</span>)</div>`
      },
      { title:'Parcourir et mÃ©thodes utiles',
        content:`
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button>scores = {<span class="str">"Alice"</span>: <span class="num">950</span>, <span class="str">"Bob"</span>: <span class="num">820</span>, <span class="str">"Charlie"</span>: <span class="num">1100</span>}

<span class="cm"># Parcourir les clÃ©s</span>
<span class="kw">for</span> nom <span class="kw">in</span> scores:
    <span class="fn">print</span>(nom)

<span class="cm"># Parcourir les valeurs</span>
<span class="kw">for</span> score <span class="kw">in</span> scores.<span class="fn">values</span>():
    <span class="fn">print</span>(score)

<span class="cm"># Parcourir clÃ©s ET valeurs</span>
<span class="kw">for</span> nom, score <span class="kw">in</span> scores.<span class="fn">items</span>():
    <span class="fn">print</span>(<span class="str">f"{nom}: {score} pts"</span>)

<span class="cm"># MÃ©thodes utiles</span>
<span class="fn">print</span>(<span class="fn">list</span>(scores.<span class="fn">keys</span>()))    <span class="cm"># ['Alice', 'Bob', 'Charlie']</span>
<span class="fn">print</span>(<span class="fn">len</span>(scores))            <span class="cm"># 3</span></div>
<div class="tip">ğŸ’¡ <code>dict.get(clÃ©, dÃ©faut)</code> est plus sÃ»r que <code>dict[clÃ©]</code> car il ne provoque pas d'erreur si la clÃ© est absente.</div>`
      }
    ]
  },
  'py-oop': {
    title:'Classes & POO en Python',
    chapters:[
      { title:'CrÃ©er une classe',
        content:`
<p>La <strong>Programmation OrientÃ©e Objet</strong> (POO) organise le code en objets qui combinent donnÃ©es et comportements.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">class</span> <span class="cls">Chien</span>:
    <span class="cm"># __init__ est le constructeur (appelÃ© Ã  la crÃ©ation)</span>
    <span class="kw">def</span> <span class="fn">__init__</span>(self, nom, race):
        self.nom = nom       <span class="cm"># Attribut d'instance</span>
        self.race = race
        self.energie = <span class="num">100</span>

    <span class="cm"># MÃ©thode</span>
    <span class="kw">def</span> <span class="fn">aboyer</span>(self):
        <span class="fn">print</span>(<span class="str">f"{self.nom} dit : Woof !"</span>)

    <span class="kw">def</span> <span class="fn">jouer</span>(self):
        self.energie -= <span class="num">20</span>
        <span class="fn">print</span>(<span class="str">f"{self.nom} joue ! Energie: {self.energie}"</span>)

<span class="cm"># CrÃ©er des instances</span>
rex = <span class="cls">Chien</span>(<span class="str">"Rex"</span>, <span class="str">"Berger"</span>)
fido = <span class="cls">Chien</span>(<span class="str">"Fido"</span>, <span class="str">"Labrador"</span>)

rex.<span class="fn">aboyer</span>()
fido.<span class="fn">jouer</span>()</div>`
      },
      { title:'HÃ©ritage',
        content:`
<p>L'hÃ©ritage permet Ã  une classe d'hÃ©riter des attributs et mÃ©thodes d'une autre classe.</p>
<div class="codeblock"><span class="cb-lang">Python</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">class</span> <span class="cls">Animal</span>:
    <span class="kw">def</span> <span class="fn">__init__</span>(self, nom):
        self.nom = nom

    <span class="kw">def</span> <span class="fn">respirer</span>(self):
        <span class="fn">print</span>(<span class="str">f"{self.nom} respire"</span>)

<span class="cm"># Chien hÃ©rite de Animal</span>
<span class="kw">class</span> <span class="cls">Chien</span>(<span class="cls">Animal</span>):
    <span class="kw">def</span> <span class="fn">__init__</span>(self, nom, race):
        <span class="fn">super</span>().<span class="fn">__init__</span>(nom)  <span class="cm"># Appelle Animal.__init__</span>
        self.race = race

    <span class="kw">def</span> <span class="fn">aboyer</span>(self):
        <span class="fn">print</span>(<span class="str">f"{self.nom} aboie !"</span>)

rex = <span class="cls">Chien</span>(<span class="str">"Rex"</span>, <span class="str">"Berger"</span>)
rex.<span class="fn">respirer</span>()   <span class="cm"># HÃ©ritÃ© de Animal</span>
rex.<span class="fn">aboyer</span>()     <span class="cm"># Propre Ã  Chien</span></div>
<div class="tip">ğŸ’¡ <code>super()</code> appelle la mÃ©thode de la classe parente. Indispensable dans les constructeurs hÃ©ritÃ©s.</div>`
      }
    ]
  },
  'js-var': {
    title:'Variables & Types JavaScript',
    chapters:[
      { title:'let, const et var',
        content:`
<p>JavaScript possÃ¨de 3 faÃ§ons de dÃ©clarer des variables, mais on en recommande 2 en pratique.</p>
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm">// const â€” valeur qui ne change pas (prÃ©fÃ©rÃ©)</span>
<span class="kw">const</span> PI = <span class="num">3.14159</span>;
<span class="kw">const</span> nom = <span class="str">"Alice"</span>;

<span class="cm">// let â€” valeur qui peut changer</span>
<span class="kw">let</span> score = <span class="num">0</span>;
score = <span class="num">100</span>;  <span class="cm">// OK</span>

<span class="cm">// var â€” ancien style, Ã©vitez-le</span>
<span class="kw">var</span> vieux = <span class="str">"dÃ©prÃ©ciÃ©"</span>;

<span class="cm">// Types automatiques</span>
<span class="kw">let</span> entier  = <span class="num">42</span>;
<span class="kw">let</span> decimal = <span class="num">3.14</span>;
<span class="kw">let</span> texte   = <span class="str">"Bonjour"</span>;
<span class="kw">let</span> booleen = <span class="kw">true</span>;
<span class="kw">let</span> rien    = <span class="kw">null</span>;
<span class="kw">let</span> inconnu = <span class="kw">undefined</span>;</div>
<div class="warn">âš ï¸ Utilisez <code>const</code> par dÃ©faut, et <code>let</code> seulement si la valeur doit changer. N'utilisez plus <code>var</code>.</div>`
      },
      { title:'Strings et template literals',
        content:`
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">const</span> prenom = <span class="str">"Bob"</span>;
<span class="kw">const</span> age = <span class="num">25</span>;

<span class="cm">// Template literal (backticks) â€” recommandÃ©</span>
console.<span class="fn">log</span>(<span class="str">\`Bonjour \${prenom}, tu as \${age} ans\`</span>);

<span class="cm">// MÃ©thodes de string</span>
<span class="kw">const</span> phrase = <span class="str">"Hello World"</span>;
console.<span class="fn">log</span>(phrase.<span class="fn">length</span>);           <span class="cm">// 11</span>
console.<span class="fn">log</span>(phrase.<span class="fn">toUpperCase</span>());    <span class="cm">// HELLO WORLD</span>
console.<span class="fn">log</span>(phrase.<span class="fn">includes</span>(<span class="str">"World"</span>)); <span class="cm">// true</span>
console.<span class="fn">log</span>(phrase.<span class="fn">split</span>(<span class="str">" "</span>));       <span class="cm">// ["Hello", "World"]</span>
console.<span class="fn">log</span>(phrase.<span class="fn">replace</span>(<span class="str">"World"</span>, <span class="str">"JS"</span>)); <span class="cm">// Hello JS</span></div>`
      }
    ]
  },
  'js-func': {
    title:'Fonctions & Arrow Functions JavaScript',
    chapters:[
      { title:'Fonctions classiques et arrow',
        content:`
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="cm">// DÃ©claration classique</span>
<span class="kw">function</span> <span class="fn">additionner</span>(a, b) {
    <span class="kw">return</span> a + b;
}

<span class="cm">// Expression de fonction</span>
<span class="kw">const</span> <span class="fn">multiplier</span> = <span class="kw">function</span>(a, b) {
    <span class="kw">return</span> a * b;
};

<span class="cm">// Arrow function (=>) â€” syntaxe moderne</span>
<span class="kw">const</span> <span class="fn">diviser</span> = (a, b) <span class="op">=&gt;</span> a / b;

<span class="cm">// Arrow avec plusieurs lignes</span>
<span class="kw">const</span> <span class="fn">saluer</span> = (nom) <span class="op">=&gt;</span> {
    <span class="kw">const</span> msg = <span class="str">\`Bonjour \${nom} !\`</span>;
    <span class="kw">return</span> msg;
};

console.<span class="fn">log</span>(<span class="fn">additionner</span>(<span class="num">3</span>, <span class="num">4</span>));   <span class="cm">// 7</span>
console.<span class="fn">log</span>(<span class="fn">saluer</span>(<span class="str">"Alice"</span>));     <span class="cm">// Bonjour Alice !</span></div>`
      },
      { title:'Callbacks et fonctions d'ordre supÃ©rieur',
        content:`
<p>En JavaScript, les fonctions sont des valeurs â€” on peut les passer en paramÃ¨tre Ã  d'autres fonctions.</p>
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">const</span> nombres = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>];

<span class="cm">// map â€” transforme chaque Ã©lÃ©ment</span>
<span class="kw">const</span> doubles = nombres.<span class="fn">map</span>(n <span class="op">=&gt;</span> n * <span class="num">2</span>);
console.<span class="fn">log</span>(doubles);   <span class="cm">// [2, 4, 6, 8, 10]</span>

<span class="cm">// filter â€” garde les Ã©lÃ©ments qui passent le test</span>
<span class="kw">const</span> pairs = nombres.<span class="fn">filter</span>(n <span class="op">=&gt;</span> n % <span class="num">2</span> === <span class="num">0</span>);
console.<span class="fn">log</span>(pairs);     <span class="cm">// [2, 4]</span>

<span class="cm">// reduce â€” rÃ©duit Ã  une seule valeur</span>
<span class="kw">const</span> somme = nombres.<span class="fn">reduce</span>((acc, n) <span class="op">=&gt;</span> acc + n, <span class="num">0</span>);
console.<span class="fn">log</span>(somme);     <span class="cm">// 15</span></div>
<div class="tip">ğŸ’¡ <code>map</code>, <code>filter</code> et <code>reduce</code> sont les 3 outils les plus puissants de JavaScript pour manipuler des tableaux.</div>`
      }
    ]
  },
  'js-dom': {
    title:'DOM & Ã‰vÃ©nements JavaScript',
    chapters:[
      { title:'SÃ©lectionner et modifier des Ã©lÃ©ments',
        content:`
<p>Le <strong>DOM</strong> (Document Object Model) est la reprÃ©sentation de votre page HTML en JavaScript. Vous pouvez le modifier pour rendre votre page interactive.</p>
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm">// SÃ©lectionner des Ã©lÃ©ments</span>
<span class="kw">const</span> titre = document.<span class="fn">querySelector</span>(<span class="str">"h1"</span>);
<span class="kw">const</span> bouton = document.<span class="fn">querySelector</span>(<span class="str">"#mon-bouton"</span>);
<span class="kw">const</span> items = document.<span class="fn">querySelectorAll</span>(<span class="str">".item"</span>);

<span class="cm">// Modifier le contenu</span>
titre.textContent = <span class="str">"Nouveau titre"</span>;
titre.innerHTML = <span class="str">"Titre &lt;em&gt;modifiÃ©&lt;/em&gt;"</span>;

<span class="cm">// Modifier le style</span>
titre.style.color = <span class="str">"red"</span>;
titre.style.fontSize = <span class="str">"2rem"</span>;

<span class="cm">// Ajouter / retirer des classes CSS</span>
titre.classList.<span class="fn">add</span>(<span class="str">"actif"</span>);
titre.classList.<span class="fn">remove</span>(<span class="str">"cache"</span>);
titre.classList.<span class="fn">toggle</span>(<span class="str">"visible"</span>);</div>`
      },
      { title:'Ã‰vÃ©nements',
        content:`
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">const</span> bouton = document.<span class="fn">querySelector</span>(<span class="str">"#btn"</span>);

<span class="cm">// Ã‰couter un clic</span>
bouton.<span class="fn">addEventListener</span>(<span class="str">"click"</span>, () <span class="op">=&gt;</span> {
    <span class="fn">alert</span>(<span class="str">"Bouton cliquÃ© !"</span>);
});

<span class="cm">// Ã‰vÃ©nement sur un champ texte</span>
<span class="kw">const</span> input = document.<span class="fn">querySelector</span>(<span class="str">"#champ"</span>);
input.<span class="fn">addEventListener</span>(<span class="str">"input"</span>, (e) <span class="op">=&gt;</span> {
    console.<span class="fn">log</span>(<span class="str">\`Valeur: \${e.target.value}\`</span>);
});

<span class="cm">// CrÃ©er et insÃ©rer un Ã©lÃ©ment</span>
<span class="kw">const</span> p = document.<span class="fn">createElement</span>(<span class="str">"p"</span>);
p.textContent = <span class="str">"Nouveau paragraphe"</span>;
document.body.<span class="fn">appendChild</span>(p);</div>
<div class="tip">ğŸ’¡ Les Ã©vÃ©nements courants : <code>click</code>, <code>input</code>, <code>submit</code>, <code>keydown</code>, <code>mouseover</code>, <code>load</code>.</div>`
      }
    ]
  },
  'js-async': {
    title:'Async / Await en JavaScript',
    chapters:[
      { title:'Promises et fetch',
        content:`
<p>Le code <strong>asynchrone</strong> permet de faire des opÃ©rations longues (requÃªtes rÃ©seau, lecture de fichier) sans bloquer le reste du programme.</p>
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm">// fetch retourne une Promise</span>
fetch(<span class="str">"https://api.example.com/users"</span>)
    .<span class="fn">then</span>(response <span class="op">=&gt;</span> response.<span class="fn">json</span>())
    .<span class="fn">then</span>(data <span class="op">=&gt;</span> console.<span class="fn">log</span>(data))
    .<span class="fn">catch</span>(err <span class="op">=&gt;</span> console.<span class="fn">error</span>(<span class="str">"Erreur:"</span>, err));</div>`
      },
      { title:'async / await â€” syntaxe moderne',
        content:`
<div class="codeblock"><span class="cb-lang">JavaScript</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm">// async/await â€” bien plus lisible !</span>
<span class="kw">async function</span> <span class="fn">getUsers</span>() {
    <span class="kw">try</span> {
        <span class="kw">const</span> response = <span class="kw">await</span> <span class="fn">fetch</span>(<span class="str">"https://api.example.com/users"</span>);
        <span class="kw">const</span> data = <span class="kw">await</span> response.<span class="fn">json</span>();
        console.<span class="fn">log</span>(data);
        <span class="kw">return</span> data;
    } <span class="kw">catch</span>(err) {
        console.<span class="fn">error</span>(<span class="str">"Erreur:"</span>, err);
    }
}
<span class="fn">getUsers</span>();</div>
<div class="tip">ğŸ’¡ <code>await</code> ne peut Ãªtre utilisÃ© que dans une fonction <code>async</code>. Il "attend" que la Promise se rÃ©solve avant de continuer.</div>`
      }
    ]
  },
  'jv-class': {
    title:'Classes & Objets en Java',
    chapters:[
      { title:'DÃ©finir une classe et crÃ©er des objets',
        content:`
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">public class</span> <span class="cls">Voiture</span> {
    <span class="cm">// Attributs (privÃ©s par encapsulation)</span>
    <span class="kw">private</span> <span class="cls">String</span> marque;
    <span class="kw">private</span> <span class="kw">int</span> annee;
    <span class="kw">private</span> <span class="kw">double</span> vitesse;

    <span class="cm">// Constructeur</span>
    <span class="kw">public</span> <span class="cls">Voiture</span>(<span class="cls">String</span> marque, <span class="kw">int</span> annee) {
        <span class="kw">this</span>.marque = marque;
        <span class="kw">this</span>.annee = annee;
        <span class="kw">this</span>.vitesse = <span class="num">0</span>;
    }

    <span class="cm">// MÃ©thodes</span>
    <span class="kw">public void</span> <span class="fn">accelerer</span>(<span class="kw">double</span> valeur) {
        vitesse += valeur;
    }

    <span class="kw">public</span> <span class="cls">String</span> <span class="fn">getMarque</span>() { <span class="kw">return</span> marque; }
}

<span class="cm">// Utilisation</span>
<span class="cls">Voiture</span> v = <span class="kw">new</span> <span class="cls">Voiture</span>(<span class="str">"Toyota"</span>, <span class="num">2023</span>);
v.<span class="fn">accelerer</span>(<span class="num">50</span>);
System.out.<span class="fn">println</span>(v.<span class="fn">getMarque</span>());</div>`
      },
      { title:'Encapsulation et getters/setters',
        content:`
<p>L'<strong>encapsulation</strong> cache les donnÃ©es internes d'un objet et les expose uniquement via des mÃ©thodes contrÃ´lÃ©es.</p>
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button><span class="kw">public class</span> <span class="cls">CompteBancaire</span> {
    <span class="kw">private double</span> solde;

    <span class="kw">public</span> <span class="cls">CompteBancaire</span>(<span class="kw">double</span> soldeInitial) {
        <span class="kw">this</span>.solde = soldeInitial;
    }

    <span class="cm">// Getter</span>
    <span class="kw">public double</span> <span class="fn">getSolde</span>() { <span class="kw">return</span> solde; }

    <span class="cm">// Setter avec validation</span>
    <span class="kw">public void</span> <span class="fn">deposer</span>(<span class="kw">double</span> montant) {
        <span class="kw">if</span> (montant <span class="op">&gt;</span> <span class="num">0</span>) solde += montant;
        <span class="kw">else</span> System.out.<span class="fn">println</span>(<span class="str">"Montant invalide"</span>);
    }
}</div>
<div class="tip">ğŸ’¡ La rÃ¨gle d'or : attributs <code>private</code>, mÃ©thodes d'accÃ¨s <code>public</code>. C'est l'encapsulation.</div>`
      }
    ]
  },
  'jv-inh': {
    title:'HÃ©ritage & Polymorphisme Java',
    chapters:[
      { title:'extends et super',
        content:`
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="kw">public class</span> <span class="cls">Animal</span> {
    <span class="kw">protected</span> <span class="cls">String</span> nom;

    <span class="kw">public</span> <span class="cls">Animal</span>(<span class="cls">String</span> nom) { <span class="kw">this</span>.nom = nom; }

    <span class="kw">public void</span> <span class="fn">parler</span>() {
        System.out.<span class="fn">println</span>(<span class="str">"..."</span>);
    }
}

<span class="kw">public class</span> <span class="cls">Chien</span> <span class="kw">extends</span> <span class="cls">Animal</span> {
    <span class="kw">public</span> <span class="cls">Chien</span>(<span class="cls">String</span> nom) {
        <span class="kw">super</span>(nom);  <span class="cm">// Appelle Animal(nom)</span>
    }

    <span class="at">@Override</span>
    <span class="kw">public void</span> <span class="fn">parler</span>() {
        System.out.<span class="fn">println</span>(nom + <span class="str">" dit : Woof !"</span>);
    }
}

<span class="cls">Animal</span> a = <span class="kw">new</span> <span class="cls">Chien</span>(<span class="str">"Rex"</span>);
a.<span class="fn">parler</span>();  <span class="cm">// Rex dit : Woof ! (polymorphisme)</span></div>`
      }
    ]
  },
  'jv-coll': {
    title:'Collections & Generics Java',
    chapters:[
      { title:'ArrayList et HashMap',
        content:`
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">import java.util.*;

<span class="cm">// ArrayList â€” liste dynamique</span>
<span class="cls">ArrayList</span>&lt;<span class="cls">String</span>&gt; fruits = <span class="kw">new</span> <span class="cls">ArrayList</span>&lt;&gt;();
fruits.<span class="fn">add</span>(<span class="str">"Pomme"</span>);
fruits.<span class="fn">add</span>(<span class="str">"Banane"</span>);
fruits.<span class="fn">add</span>(<span class="str">"Cerise"</span>);

<span class="fn">System.out.println</span>(fruits.<span class="fn">get</span>(<span class="num">0</span>));    <span class="cm">// Pomme</span>
<span class="fn">System.out.println</span>(fruits.<span class="fn">size</span>());    <span class="cm">// 3</span>
fruits.<span class="fn">remove</span>(<span class="str">"Banane"</span>);

<span class="kw">for</span> (<span class="cls">String</span> f : fruits) {
    System.out.<span class="fn">println</span>(f);
}

<span class="cm">// HashMap â€” clÃ© â†’ valeur</span>
<span class="cls">HashMap</span>&lt;<span class="cls">String</span>, <span class="cls">Integer</span>&gt; scores = <span class="kw">new</span> <span class="cls">HashMap</span>&lt;&gt;();
scores.<span class="fn">put</span>(<span class="str">"Alice"</span>, <span class="num">950</span>);
scores.<span class="fn">put</span>(<span class="str">"Bob"</span>, <span class="num">820</span>);

System.out.<span class="fn">println</span>(scores.<span class="fn">get</span>(<span class="str">"Alice"</span>));  <span class="cm">// 950</span></div>`
      }
    ]
  },
  'jv-exc': {
    title:'Exceptions en Java',
    chapters:[
      { title:'try, catch, finally',
        content:`
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="kw">public class</span> <span class="cls">Main</span> {
    <span class="kw">public static void</span> <span class="fn">main</span>(<span class="cls">String</span>[] args) {
        <span class="kw">try</span> {
            <span class="kw">int</span> resultat = <span class="num">10</span> / <span class="num">0</span>;   <span class="cm">// Provoque ArithmeticException</span>
        } <span class="kw">catch</span> (<span class="cls">ArithmeticException</span> e) {
            System.out.<span class="fn">println</span>(<span class="str">"Erreur: "</span> + e.<span class="fn">getMessage</span>());
        } <span class="kw">finally</span> {
            System.out.<span class="fn">println</span>(<span class="str">"Toujours exÃ©cutÃ©"</span>);
        }

        <span class="cm">// Plusieurs catch</span>
        <span class="kw">try</span> {
            <span class="cls">String</span> s = <span class="kw">null</span>;
            s.<span class="fn">length</span>();  <span class="cm">// NullPointerException</span>
        } <span class="kw">catch</span> (<span class="cls">NullPointerException</span> e) {
            System.out.<span class="fn">println</span>(<span class="str">"Objet null !"</span>);
        } <span class="kw">catch</span> (<span class="cls">Exception</span> e) {
            System.out.<span class="fn">println</span>(<span class="str">"Erreur gÃ©nÃ©rale"</span>);
        }
    }
}</div>
<div class="tip">ğŸ’¡ <code>finally</code> est exÃ©cutÃ© qu'il y ait une exception ou non. IdÃ©al pour fermer des fichiers ou connexions.</div>`
      }
    ]
  },
  'ht-base': {
    title:'Balises HTML essentielles',
    chapters:[
      { title:'Structure d'une page HTML',
        content:`
<div class="codeblock"><span class="cb-lang">HTML</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">&lt;!DOCTYPE html&gt;
&lt;<span class="kw">html</span> lang=<span class="str">"fr"</span>&gt;
&lt;<span class="kw">head</span>&gt;
    &lt;<span class="kw">meta</span> charset=<span class="str">"UTF-8"</span>&gt;
    &lt;<span class="kw">meta</span> name=<span class="str">"viewport"</span> content=<span class="str">"width=device-width, initial-scale=1.0"</span>&gt;
    &lt;<span class="kw">title</span>&gt;Ma Page&lt;/<span class="kw">title</span>&gt;
    &lt;<span class="kw">link</span> rel=<span class="str">"stylesheet"</span> href=<span class="str">"style.css"</span>&gt;
&lt;/<span class="kw">head</span>&gt;
&lt;<span class="kw">body</span>&gt;
    &lt;<span class="kw">header</span>&gt;
        &lt;<span class="kw">h1</span>&gt;Titre principal&lt;/<span class="kw">h1</span>&gt;
        &lt;<span class="kw">nav</span>&gt;Menu de navigation&lt;/<span class="kw">nav</span>&gt;
    &lt;/<span class="kw">header</span>&gt;
    &lt;<span class="kw">main</span>&gt;
        &lt;<span class="kw">section</span>&gt;
            &lt;<span class="kw">h2</span>&gt;Section&lt;/<span class="kw">h2</span>&gt;
            &lt;<span class="kw">p</span>&gt;Un paragraphe de texte.&lt;/<span class="kw">p</span>&gt;
        &lt;/<span class="kw">section</span>&gt;
    &lt;/<span class="kw">main</span>&gt;
    &lt;<span class="kw">footer</span>&gt;Pied de page&lt;/<span class="kw">footer</span>&gt;
    &lt;<span class="kw">script</span> src=<span class="str">"script.js"</span>&gt;&lt;/<span class="kw">script</span>&gt;
&lt;/<span class="kw">body</span>&gt;
&lt;/<span class="kw">html</span>&gt;</div>
<div class="tip">ğŸ’¡ Les balises sÃ©mantiques (<code>header</code>, <code>main</code>, <code>footer</code>, <code>section</code>) dÃ©crivent le rÃ´le du contenu. PrÃ©fÃ©rez-les aux <code>div</code> gÃ©nÃ©riques.</div>`
      },
      { title:'Balises courantes',
        content:`
<div class="codeblock"><span class="cb-lang">HTML</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">&lt;<span class="kw">h1</span>&gt;Titre 1&lt;/<span class="kw">h1</span>&gt; &lt;<span class="kw">h2</span>&gt;Titre 2&lt;/<span class="kw">h2</span>&gt; &lt;<span class="kw">h3</span>&gt;Titre 3&lt;/<span class="kw">h3</span>&gt;
&lt;<span class="kw">p</span>&gt;Paragraphe avec du &lt;<span class="kw">strong</span>&gt;texte gras&lt;/<span class="kw">strong</span>&gt; et &lt;<span class="kw">em</span>&gt;italique&lt;/<span class="kw">em</span>&gt;&lt;/<span class="kw">p</span>&gt;
&lt;<span class="kw">a</span> href=<span class="str">"https://google.com"</span>&gt;Lien vers Google&lt;/<span class="kw">a</span>&gt;
&lt;<span class="kw">img</span> src=<span class="str">"photo.jpg"</span> alt=<span class="str">"Description"</span>&gt;
&lt;<span class="kw">ul</span>&gt;
    &lt;<span class="kw">li</span>&gt;Ã‰lÃ©ment 1&lt;/<span class="kw">li</span>&gt;
    &lt;<span class="kw">li</span>&gt;Ã‰lÃ©ment 2&lt;/<span class="kw">li</span>&gt;
&lt;/<span class="kw">ul</span>&gt;
&lt;<span class="kw">input</span> type=<span class="str">"text"</span> placeholder=<span class="str">"Votre nom"</span>&gt;
&lt;<span class="kw">button</span>&gt;Cliquez ici&lt;/<span class="kw">button</span>&gt;</div>`
      }
    ]
  },
  'ht-css': {
    title:'CSS Fondamentaux',
    chapters:[
      { title:'SÃ©lecteurs et propriÃ©tÃ©s',
        content:`
<div class="codeblock"><span class="cb-lang">CSS</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">/* SÃ©lecteur par balise */
p { color: blue; }

/* SÃ©lecteur par classe */
.titre { font-size: 2rem; font-weight: bold; }

/* SÃ©lecteur par ID */
#menu { background: #333; }

/* Box model */
.carte {
    width: 300px;
    padding: 20px;      /* Espace intÃ©rieur */
    border: 2px solid black;
    margin: 10px;       /* Espace extÃ©rieur */
    border-radius: 8px;
}

/* Couleurs */
.element {
    color: #ff0000;             /* Texte rouge */
    background-color: #f0f0f0;  /* Fond gris clair */
    opacity: 0.8;               /* Transparence */
}</div>`
      },
      { title:'Flexbox en une page',
        content:`
<div class="codeblock"><span class="cb-lang">CSS</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">.conteneur {
    display: flex;
    flex-direction: row;       /* ou column */
    justify-content: center;   /* Axe principal */
    align-items: center;       /* Axe secondaire */
    gap: 16px;
    flex-wrap: wrap;           /* Retour Ã  la ligne */
}

/* Les enfants */
.enfant {
    flex: 1;       /* Prend l'espace disponible */
    flex: 0 0 200px; /* Taille fixe */
}</div>
<div class="tip">ğŸ’¡ Retenez : <code>justify-content</code> = axe principal (horizontal par dÃ©faut), <code>align-items</code> = axe croisÃ© (vertical par dÃ©faut).</div>`
      }
    ]
  },
  'ht-flex': {
    title:'Flexbox avancÃ©',
    chapters:[
      { title:'Toutes les propriÃ©tÃ©s Flexbox',
        content:`
<div class="codeblock"><span class="cb-lang">CSS</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">/* Sur le conteneur */
.conteneur {
    display: flex;
    flex-direction: row | column | row-reverse;
    justify-content: flex-start | center | flex-end | space-between | space-around;
    align-items: flex-start | center | flex-end | stretch;
    flex-wrap: nowrap | wrap;
    gap: 12px;
}

/* Sur les enfants */
.enfant {
    flex-grow: 1;    /* Grandir pour remplir l'espace */
    flex-shrink: 0;  /* Ne pas rÃ©trÃ©cir */
    flex-basis: 200px; /* Taille de base */
    align-self: center; /* Override align-items */
    order: 2;        /* Changer l'ordre d'affichage */
}</div>`
      }
    ]
  },
  'ht-grid': {
    title:'CSS Grid',
    chapters:[
      { title:'CrÃ©er une grille',
        content:`
<div class="codeblock"><span class="cb-lang">CSS</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">.grille {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;   /* 3 colonnes */
    grid-template-rows: auto;
    gap: 16px;

    /* Colonnes rÃ©pÃ©tÃ©es */
    grid-template-columns: repeat(3, 1fr);

    /* Responsive auto-fill */
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
}

/* Placer un Ã©lÃ©ment sur plusieurs colonnes */
.gros-element {
    grid-column: 1 / 3;   /* De la colonne 1 Ã  3 */
    grid-row: 1 / 2;
}</div>
<div class="tip">ğŸ’¡ RÃ¨gle simple : utilisez <strong>Flexbox</strong> pour les layouts 1D (une ligne ou une colonne), et <strong>Grid</strong> pour les layouts 2D (lignes ET colonnes).</div>`
      }
    ]
  },
  'lx-perm': {
    title:'Fichiers & Permissions Linux',
    chapters:[
      { title:'Lire les permissions',
        content:`
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">$ ls -la
-rwxr-xr-- 1 alice users 4096 Jan 1 script.sh

<span class="cm"># DÃ©cryptage : -rwxr-xr--
# - : type (- fichier, d dossier, l lien)
# rwx : propriÃ©taire (lecture, Ã©criture, exÃ©cution)
# r-x : groupe (lecture, pas Ã©criture, exÃ©cution)
# r-- : autres (lecture uniquement)</span></div>
<h3>chmod â€” modifier les permissions</h3>
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm"># Notation symbolique</span>
<span class="fn">chmod</span> +x script.sh      <span class="cm"># Rendre exÃ©cutable</span>
<span class="fn">chmod</span> -w fichier.txt    <span class="cm"># Enlever l'Ã©criture</span>
<span class="fn">chmod</span> u+x,g-w script.sh <span class="cm"># u=user, g=group, o=other</span>

<span class="cm"># Notation octale</span>
<span class="fn">chmod</span> <span class="num">755</span> script.sh   <span class="cm"># rwxr-xr-x</span>
<span class="fn">chmod</span> <span class="num">644</span> fichier.txt  <span class="cm"># rw-r--r--</span>
<span class="fn">chmod</span> <span class="num">600</span> secret.key   <span class="cm"># rw------- (privÃ©)</span></div>
<div class="tip">ğŸ’¡ Aide-mÃ©moire octal : 4=lecture, 2=Ã©criture, 1=exÃ©cution. Addionnez-les : 7=rwx, 6=rw-, 5=r-x, 4=r--</div>`
      }
    ]
  },
  'lx-bash': {
    title:'Bash Scripting',
    chapters:[
      { title:'Votre premier script Bash',
        content:`
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">#!/bin/bash
<span class="cm"># Le shebang indique l'interprÃ©teur</span>

<span class="cm"># Variables</span>
NOM="Alice"
AGE=30
<span class="fn">echo</span> <span class="str">"Bonjour $NOM, tu as $AGE ans"</span>

<span class="cm"># Condition</span>
<span class="kw">if</span> [ $AGE <span class="op">-ge</span> 18 ]; <span class="kw">then</span>
    <span class="fn">echo</span> <span class="str">"Majeur"</span>
<span class="kw">else</span>
    <span class="fn">echo</span> <span class="str">"Mineur"</span>
<span class="kw">fi</span>

<span class="cm"># Boucle</span>
<span class="kw">for</span> i <span class="kw">in</span> 1 2 3 4 5; <span class="kw">do</span>
    <span class="fn">echo</span> <span class="str">"Ligne $i"</span>
<span class="kw">done</span></div>
<div class="warn">âš ï¸ Rendez le script exÃ©cutable avant de le lancer : <code>chmod +x script.sh</code> puis <code>./script.sh</code></div>`
      }
    ]
  },
  'lx-apt': {
    title:'APT & Gestion des paquets',
    chapters:[
      { title:'Installer et gÃ©rer des logiciels',
        content:`
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm"># Mettre Ã  jour la liste des paquets</span>
<span class="fn">sudo apt update</span>

<span class="cm"># Mettre Ã  jour tous les paquets installÃ©s</span>
<span class="fn">sudo apt upgrade</span>

<span class="cm"># Installer un paquet</span>
<span class="fn">sudo apt install</span> vim
<span class="fn">sudo apt install</span> python3 git nodejs

<span class="cm"># Supprimer un paquet</span>
<span class="fn">sudo apt remove</span> vim
<span class="fn">sudo apt purge</span> vim      <span class="cm"># Supprime aussi la config</span>

<span class="cm"># Chercher un paquet</span>
<span class="fn">apt search</span> "Ã©diteur texte"

<span class="cm"># Infos sur un paquet</span>
<span class="fn">apt show</span> vim

<span class="cm"># Nettoyer les paquets inutiles</span>
<span class="fn">sudo apt autoremove</span></div>
<div class="tip">ğŸ’¡ Toujours lancer <code>sudo apt update</code> avant <code>sudo apt install</code> pour avoir les versions les plus rÃ©centes.</div>`
      }
    ]
  },
  'mc-item': {
    title:'CrÃ©er des Items Minecraft',
    chapters:[
      { title:'Classe Item et enregistrement',
        content:`
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm">// MonItem.java</span>
<span class="kw">public class</span> <span class="cls">MonItem</span> <span class="kw">extends</span> <span class="cls">Item</span> {
    <span class="kw">public</span> <span class="cls">MonItem</span>() {
        <span class="kw">super</span>(<span class="kw">new</span> <span class="cls">Item</span>.<span class="cls">Properties</span>()
            .<span class="fn">stacksTo</span>(<span class="num">64</span>)
            .<span class="fn">rarity</span>(<span class="cls">Rarity</span>.RARE)
        );
    }
}

<span class="cm">// Dans votre classe principale du mod</span>
<span class="kw">public static final</span> <span class="cls">RegistryObject</span>&lt;<span class="cls">Item</span>&gt; MON_ITEM =
    <span class="cls">ITEMS</span>.<span class="fn">register</span>(<span class="str">"mon_item"</span>,
        () <span class="op">-&gt;</span> <span class="kw">new</span> <span class="cls">MonItem</span>());</div>
<h3>ModÃ¨le JSON</h3>
<div class="codeblock"><span class="cb-lang">JSON</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">{
    "parent": "item/generated",
    "textures": {
        "layer0": "monmod:item/mon_item"
    }
}</div>`
      }
    ]
  },
  'mc-block': {
    title:'CrÃ©er des Blocs Minecraft',
    chapters:[
      { title:'Enregistrer un bloc',
        content:`
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm">// Enregistrement du bloc</span>
<span class="kw">public static final</span> <span class="cls">RegistryObject</span>&lt;<span class="cls">Block</span>&gt; MON_BLOC =
    <span class="cls">BLOCKS</span>.<span class="fn">register</span>(<span class="str">"mon_bloc"</span>, () <span class="op">-&gt;</span>
        <span class="kw">new</span> <span class="cls">Block</span>(<span class="cls">BlockBehaviour</span>.<span class="cls">Properties</span>
            .<span class="fn">of</span>()
            .<span class="fn">mapColor</span>(<span class="cls">MapColor</span>.STONE)
            .<span class="fn">requiresCorrectToolForDrops</span>()
            .<span class="fn">strength</span>(<span class="num">3.0f</span>, <span class="num">3.0f</span>)
        )
    );

<span class="cm">// Item du bloc (pour l'inventaire)</span>
<span class="kw">public static final</span> <span class="cls">RegistryObject</span>&lt;<span class="cls">Item</span>&gt; MON_BLOC_ITEM =
    <span class="cls">ITEMS</span>.<span class="fn">register</span>(<span class="str">"mon_bloc"</span>, () <span class="op">-&gt;</span>
        <span class="kw">new</span> <span class="cls">BlockItem</span>(<span class="cls">ModBlocks</span>.MON_BLOC.<span class="fn">get</span>(),
            <span class="kw">new</span> <span class="cls">Item</span>.<span class="cls">Properties</span>()));</div>`
      }
    ]
  },
  'mc-event': {
    title:'Ã‰vÃ©nements & Handlers Forge',
    chapters:[
      { title:'@SubscribeEvent',
        content:`
<div class="codeblock"><span class="cb-lang">Java</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="at">@Mod</span>.EventBusSubscriber(<span class="fn">modid</span> = MonMod.MOD_ID)
<span class="kw">public class</span> <span class="cls">ModEvents</span> {

    <span class="at">@SubscribeEvent</span>
    <span class="kw">public static void</span> <span class="fn">onPlayerLogin</span>(<span class="cls">PlayerEvent</span>.<span class="cls">PlayerLoggedInEvent</span> event) {
        event.<span class="fn">getEntity</span>().<span class="fn">sendSystemMessage</span>(
            <span class="cls">Component</span>.<span class="fn">literal</span>(<span class="str">"Bienvenue dans mon mod !"</span>)
        );
    }

    <span class="at">@SubscribeEvent</span>
    <span class="kw">public static void</span> <span class="fn">onLivingDeath</span>(<span class="cls">LivingDeathEvent</span> event) {
        <span class="kw">if</span> (event.<span class="fn">getEntity</span>() <span class="kw">instanceof</span> <span class="cls">Player</span> player) {
            System.out.<span class="fn">println</span>(player.<span class="fn">getName</span>() + <span class="str">" est mort !"</span>);
        }
    }
}</div>`
      }
    ]
  },
  'mc-rp': {
    title:'Resource Packs Minecraft',
    chapters:[
      { title:'Structure d'un resource pack',
        content:`
<div class="codeblock"><span class="cb-lang">Structure</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">mon_pack/
â”œâ”€â”€ pack.mcmeta          â† Obligatoire
â”œâ”€â”€ pack.png             â† IcÃ´ne (optionnel)
â””â”€â”€ assets/
    â””â”€â”€ minecraft/
        â”œâ”€â”€ textures/
        â”‚   â”œâ”€â”€ block/   â† Textures des blocs (PNG 16x16)
        â”‚   â””â”€â”€ item/    â† Textures des items
        â”œâ”€â”€ sounds/      â† Fichiers audio (.ogg)
        â”œâ”€â”€ lang/
        â”‚   â””â”€â”€ fr_fr.json  â† Traductions
        â””â”€â”€ models/
            â””â”€â”€ block/   â† ModÃ¨les JSON</div>
<h3>pack.mcmeta</h3>
<div class="codeblock"><span class="cb-lang">JSON</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">{
    "pack": {
        "pack_format": 15,
        "description": "Mon super resource pack"
    }
}</div>
<div class="tip">ğŸ’¡ <code>pack_format</code> : 15 = Minecraft 1.20. Consultez le wiki Minecraft pour les autres versions.</div>`
      }
    ]
  },
  'mc-dp': {
    title:'Datapacks Minecraft',
    chapters:[
      { title:'Structure et fonctions',
        content:`
<div class="codeblock"><span class="cb-lang">Structure</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">mon_datapack/
â”œâ”€â”€ pack.mcmeta
â””â”€â”€ data/
    â””â”€â”€ monpack/
        â”œâ”€â”€ functions/
        â”‚   â”œâ”€â”€ setup.mcfunction
        â”‚   â””â”€â”€ tick.mcfunction
        â”œâ”€â”€ tags/
        â”‚   â””â”€â”€ functions/
        â”‚       â”œâ”€â”€ load.json   â† AppelÃ© au chargement
        â”‚       â””â”€â”€ tick.json   â† AppelÃ© chaque tick
        â””â”€â”€ advancements/</div>
<h3>Exemple de fonction .mcfunction</h3>
<div class="codeblock"><span class="cb-lang">mcfunction</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm"># setup.mcfunction</span>
<span class="mc">say</span> Datapack chargÃ© !
<span class="mc">give</span> @a diamond 1
<span class="mc">effect give</span> @a speed 10 1 true
<span class="mc">scoreboard objectives add</span> kills playerKillCount</div>`
      }
    ]
  },
  'wo-toc': {
    title:'Structure d'un Add-on WoW',
    chapters:[
      { title:'Le fichier .toc',
        content:`
<div class="codeblock"><span class="cb-lang">TOC</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">## Interface: 100200
## Title: Mon Add-on
## Notes: Description de mon add-on
## Author: VotreNom
## Version: 1.0.0
## SavedVariables: MonAddonDB

<span class="cm"># Fichiers chargÃ©s dans l'ordre</span>
libs/LibStub.lua
core.lua
gui.lua
events.lua</div>
<div class="note">â„¹ï¸ Le fichier .toc doit avoir le mÃªme nom que le dossier de l'add-on : <code>MonAddon/MonAddon.toc</code></div>
<h3>Structure complÃ¨te</h3>
<div class="codeblock"><span class="cb-lang">Structure</span><button class="copy-btn" onclick="copyCode(this)">Copier</button">Interface/AddOns/
â””â”€â”€ MonAddon/
    â”œâ”€â”€ MonAddon.toc    â† Obligatoire
    â”œâ”€â”€ core.lua        â† Logique principale
    â”œâ”€â”€ gui.lua         â† Interface utilisateur
    â””â”€â”€ locales/
        â””â”€â”€ frFR.lua    â† Traductions</div>`
      }
    ]
  },
  'wo-frame': {
    title:'Frames & Interface WoW',
    chapters:[
      { title:'CrÃ©er un frame',
        content:`
<div class="codeblock"><span class="cb-lang">Lua</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm">-- CrÃ©er un frame de base</span>
<span class="kw">local</span> frame = <span class="fn">CreateFrame</span>(<span class="str">"Frame"</span>, <span class="str">"MonFrame"</span>, UIParent)
frame:<span class="fn">SetSize</span>(<span class="num">200</span>, <span class="num">150</span>)
frame:<span class="fn">SetPoint</span>(<span class="str">"CENTER"</span>, UIParent, <span class="str">"CENTER"</span>, <span class="num">0</span>, <span class="num">0</span>)

<span class="cm">-- Fond colorÃ©</span>
frame.bg = frame:<span class="fn">CreateTexture</span>(<span class="kw">nil</span>, <span class="str">"BACKGROUND"</span>)
frame.bg:<span class="fn">SetAllPoints</span>(frame)
frame.bg:<span class="fn">SetColorTexture</span>(<span class="num">0</span>, <span class="num">0</span>, <span class="num">0</span>, <span class="num">0.8</span>)  <span class="cm">-- RGBA</span>

<span class="cm">-- Titre</span>
frame.titre = frame:<span class="fn">CreateFontString</span>(<span class="kw">nil</span>, <span class="str">"OVERLAY"</span>, <span class="str">"GameFontNormal"</span>)
frame.titre:<span class="fn">SetPoint</span>(<span class="str">"TOP"</span>, frame, <span class="str">"TOP"</span>, <span class="num">0</span>, <span class="op">-</span><span class="num">10</span>)
frame.titre:<span class="fn">SetText</span>(<span class="str">"Mon Add-on"</span>)

<span class="cm">-- Rendre dÃ©plaÃ§able</span>
frame:<span class="fn">SetMovable</span>(<span class="kw">true</span>)
frame:<span class="fn">EnableMouse</span>(<span class="kw">true</span>)
frame:<span class="fn">RegisterForDrag</span>(<span class="str">"LeftButton"</span>)
frame:<span class="fn">SetScript</span>(<span class="str">"OnDragStart"</span>, frame.StartMoving)
frame:<span class="fn">SetScript</span>(<span class="str">"OnDragStop"</span>, frame.StopMovingOrSizing)</div>`
      }
    ]
  },
  'wo-event': {
    title:'Ã‰vÃ©nements WoW',
    chapters:[
      { title:'RegisterEvent et handlers',
        content:`
<div class="codeblock"><span class="cb-lang">Lua</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="kw">local</span> frame = <span class="fn">CreateFrame</span>(<span class="str">"Frame"</span>)

<span class="cm">-- Enregistrer des Ã©vÃ©nements</span>
frame:<span class="fn">RegisterEvent</span>(<span class="str">"PLAYER_LOGIN"</span>)
frame:<span class="fn">RegisterEvent</span>(<span class="str">"PLAYER_ENTERING_WORLD"</span>)
frame:<span class="fn">RegisterEvent</span>(<span class="str">"COMBAT_LOG_EVENT_UNFILTERED"</span>)

<span class="cm">-- Handler qui reÃ§oit tous les Ã©vÃ©nements</span>
frame:<span class="fn">SetScript</span>(<span class="str">"OnEvent"</span>, <span class="kw">function</span>(self, event, ...)
    <span class="kw">if</span> event == <span class="str">"PLAYER_LOGIN"</span> <span class="kw">then</span>
        <span class="fn">print</span>(<span class="str">"Bienvenue, "</span> .. <span class="fn">UnitName</span>(<span class="str">"player"</span>) .. <span class="str">" !"</span>)

    <span class="kw">elseif</span> event == <span class="str">"PLAYER_ENTERING_WORLD"</span> <span class="kw">then</span>
        <span class="fn">print</span>(<span class="str">"Zone chargÃ©e !"</span>)
    <span class="kw">end</span>
<span class="kw">end</span>)</div>
<div class="tip">ğŸ’¡ Ã‰vÃ©nements utiles : <code>UNIT_HEALTH</code>, <code>PLAYER_REGEN_DISABLED</code> (en combat), <code>CHAT_MSG_SAY</code>, <code>BAG_UPDATE</code>.</div>`
      }
    ]
  },
  'wo-api': {
    title:'API Blizzard',
    chapters:[
      { title:'Fonctions API courantes',
        content:`
<div class="codeblock"><span class="cb-lang">Lua</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm">-- Informations sur le joueur</span>
<span class="fn">UnitName</span>(<span class="str">"player"</span>)          <span class="cm">-- Nom du joueur</span>
<span class="fn">UnitLevel</span>(<span class="str">"player"</span>)         <span class="cm">-- Niveau</span>
<span class="fn">UnitHealth</span>(<span class="str">"player"</span>)        <span class="cm">-- PV actuels</span>
<span class="fn">UnitHealthMax</span>(<span class="str">"player"</span>)     <span class="cm">-- PV maximum</span>
<span class="fn">UnitClass</span>(<span class="str">"player"</span>)         <span class="cm">-- Classe</span>

<span class="cm">-- Sorts</span>
<span class="fn">GetSpellInfo</span>(<span class="num">1234</span>)           <span class="cm">-- Infos d'un sort par ID</span>
<span class="fn">IsSpellKnown</span>(<span class="num">1234</span>)           <span class="cm">-- ConnaÃ®t ce sort ?</span>

<span class="cm">-- Inventaire</span>
<span class="fn">GetItemInfo</span>(<span class="num">6948</span>)            <span class="cm">-- Infos d'un item (Pierre de Foyer)</span>
<span class="fn">GetContainerNumSlots</span>(<span class="num">0</span>)     <span class="cm">-- Nombre de slots du sac 0</span>

<span class="cm">-- Afficher un message dans le chat</span>
<span class="fn">DEFAULT_CHAT_FRAME</span>:<span class="fn">AddMessage</span>(<span class="str">"|cff00ff00Texte vert|r"</span>)</div>`
      }
    ]
  },
  'gt-init': {
    title:'Git â€” Init & Commit',
    chapters:[
      { title:'Initialiser et committer',
        content:`
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm"># Initialiser un dÃ©pÃ´t Git</span>
<span class="fn">git init</span>

<span class="cm"># Configurer votre identitÃ© (une seule fois)</span>
<span class="fn">git config</span> --global user.name <span class="str">"Votre Nom"</span>
<span class="fn">git config</span> --global user.email <span class="str">"vous@exemple.com"</span>

<span class="cm"># VÃ©rifier l'Ã©tat des fichiers</span>
<span class="fn">git status</span>

<span class="cm"># Ajouter des fichiers au staging</span>
<span class="fn">git add</span> fichier.txt      <span class="cm"># Un fichier</span>
<span class="fn">git add</span> .                <span class="cm"># Tout le dossier courant</span>

<span class="cm"># CrÃ©er un commit</span>
<span class="fn">git commit</span> -m <span class="str">"feat: ajouter la page d'accueil"</span>

<span class="cm"># Voir l'historique</span>
<span class="fn">git log</span> --oneline</div>
<div class="tip">ğŸ’¡ Convention de message : commencez par <code>feat:</code> (nouvelle fonctionnalitÃ©), <code>fix:</code> (correction), <code>docs:</code> (documentation).</div>`
      }
    ]
  },
  'gt-br': {
    title:'Branches & Merge Git',
    chapters:[
      { title:'CrÃ©er et fusionner des branches',
        content:`
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm"># CrÃ©er et basculer sur une nouvelle branche</span>
<span class="fn">git checkout</span> -b ma-fonctionnalite

<span class="cm"># Ou avec la syntaxe moderne</span>
<span class="fn">git switch</span> -c ma-fonctionnalite

<span class="cm"># Voir toutes les branches</span>
<span class="fn">git branch</span>

<span class="cm"># Basculer sur une branche existante</span>
<span class="fn">git switch</span> main

<span class="cm"># Fusionner une branche dans main</span>
<span class="fn">git switch</span> main
<span class="fn">git merge</span> ma-fonctionnalite

<span class="cm"># Supprimer la branche fusionnÃ©e</span>
<span class="fn">git branch</span> -d ma-fonctionnalite</div>
<div class="tip">ğŸ’¡ RÃ¨gle d'or : ne travaillez jamais directement sur <code>main</code>. CrÃ©ez toujours une branche pour chaque fonctionnalitÃ©.</div>`
      }
    ]
  },
  'gt-remote': {
    title:'GitHub & Remote',
    chapters:[
      { title:'Connecter et synchroniser avec GitHub',
        content:`
<div class="codeblock"><span class="cb-lang">Bash</span><button class="copy-btn" onclick="copyCode(this)">Copier</button"><span class="cm"># Connecter un dÃ©pÃ´t local Ã  GitHub</span>
<span class="fn">git remote add</span> origin https://github.com/user/repo.git

<span class="cm"># Envoyer vos commits sur GitHub</span>
<span class="fn">git push</span> -u origin main

<span class="cm"># RÃ©cupÃ©rer les changements distants</span>
<span class="fn">git pull</span>

<span class="cm"># Cloner un dÃ©pÃ´t existant</span>
<span class="fn">git clone</span> https://github.com/user/repo.git

<span class="cm"># Voir les remotes configurÃ©s</span>
<span class="fn">git remote</span> -v</div>
<div class="tip">ğŸ’¡ Workflow typique : <code>git pull</code> â†’ modifier les fichiers â†’ <code>git add .</code> â†’ <code>git commit -m "..."</code> â†’ <code>git push</code></div>`
      }
    ]
  },

};

const QB = {
  'py-var':[
    {p:'ğŸ“¦ Python Â· Variables',q:'Quel type stocke un nombre dÃ©cimal ?',t:'mcq',o:['float','int','str','bool'],c:0,e:'float stocke les dÃ©cimaux : 3.14, -0.5, 2.0â€¦'},
    {p:'ğŸ“¦ Python Â· Variables',q:'Comment afficher "Bonjour" en Python ?',t:'mcq',o:['print("Bonjour")','echo "Bonjour"','console.log("Bonjour")','write("Bonjour")'],c:0,e:'print() est la fonction d\'affichage standard en Python.'},
    {p:'ğŸ“¦ Python Â· Variables',q:'Quelle fonction retourne le type d\'une variable ?',t:'mcq',o:['type(x)','typeof x','x.type()','gettype(x)'],c:0,e:'type(42) renvoie <class \'int\'>.'},
    {p:'ğŸ“¦ Python Â· Variables',q:'Quel opÃ©rateur concatÃ¨ne deux strings ?',t:'mcq',o:['+','*','&','..'],c:0,e:'"Hello" + " World" â†’ "Hello World"'},
    {p:'ğŸ“¦ Python Â· Variables',q:'Comment convertir la string "42" en entier ?',t:'mcq',o:['int("42")','integer("42")','(int)"42"','convert("42",int)'],c:0,e:'int() convertit une chaÃ®ne numÃ©rique en entier.'},
    {p:'ğŸ“¦ Python Â· Variables',q:'Quelle est la valeur de type(3.14) ?',t:'mcq',o:["<class 'float'>",'float',"<class 'int'>",'number'],c:0,e:'3.14 est un float, type() retourne <class \'float\'>.'},
    {p:'ğŸ“¦ Python Â· Variables',q:'ComplÃ©tez : variable age valant 25',t:'fill',code:`<span class="op">___</span> = <span class="num">25</span>`,b:'age',e:'En Python : nom_variable = valeur. Simple !'},
    {p:'ğŸ“¦ Python Â· f-strings',q:'Comment insÃ©rer une variable dans un f-string ?',t:'mcq',o:['f"Bonjour \u007Bnom\u007D"','f"Bonjour $nom"','f"Bonjour %nom%"','f"Bonjour [nom]"'],c:0,e:'Dans un f-string, les variables sont entre accolades \u007Bvariable\u007D.'},
    {p:'ğŸ“¦ Python Â· Variables',q:'Quelle valeur Python reprÃ©sente "vrai" ?',t:'mcq',o:['True','true','TRUE','1 (uniquement)'],c:0,e:'En Python, le boolÃ©en s\'Ã©crit True avec un T majuscule.'},
    {p:'ğŸ“¦ Python Â· Variables',q:'Que retourne int(3.9) ?',t:'mcq',o:['3','4','3.9','Error'],c:0,e:'int() tronque vers zÃ©ro : int(3.9) = 3, int(-3.9) = -3.'},
  ],
  'py-loop':[
    {p:'ğŸ” Python Â· Boucles',q:'Que produit range(3) ?',t:'mcq',o:['0, 1, 2','1, 2, 3','0, 1, 2, 3','1, 2'],c:0,e:'range(3) gÃ©nÃ¨re 0, 1, 2 â€” il ne va pas jusqu\'Ã  3.'},
    {p:'ğŸ” Python Â· Boucles',q:'Quel mot-clÃ© quitte une boucle immÃ©diatement ?',t:'mcq',o:['break','stop','exit','return'],c:0,e:'break sort de la boucle en cours.'},
    {p:'ğŸ” Python Â· Boucles',q:'Que fait continue dans une boucle ?',t:'mcq',o:['Saute l\'itÃ©ration courante','ArrÃªte la boucle','Recommence depuis le dÃ©but','Ne fait rien'],c:0,e:'continue passe directement Ã  l\'itÃ©ration suivante.'},
    {p:'ğŸ” Python Â· Boucles',q:'ComplÃ©tez range() pour commencer Ã  1 :',t:'fill',code:`<span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="op">___</span>, <span class="num">6</span>):\n    <span class="fn">print</span>(i)`,b:'1',e:'range(1, 6) gÃ©nÃ¨re 1, 2, 3, 4, 5.'},
    {p:'ğŸ” Python Â· Boucles',q:'Quelle boucle s\'exÃ©cute tant qu\'une condition est vraie ?',t:'mcq',o:['while','for','loop','repeat'],c:0,e:'while condition: ... continue tant que la condition est True.'},
    {p:'ğŸ” Python Â· Boucles',q:'Sortie de : for i in range(2, 8, 2): print(i) ?',t:'mcq',o:['2 4 6','2 4 6 8','0 2 4 6','2 3 4 5 6 7'],c:0,e:'range(2, 8, 2) = 2, 4, 6 (pas jusqu\'Ã  8, step de 2).'},
    {p:'ğŸ” Python Â· Boucles',q:'Comment obtenir index ET valeur dans une boucle for ?',t:'mcq',o:['enumerate(liste)','index(liste)','range(liste)','zip(liste)'],c:0,e:'enumerate(liste) retourne des tuples (index, valeur).'},
    {p:'ğŸ” Python Â· Boucles',q:'Quelle boucle est prÃ©fÃ©rable si le nombre d\'itÃ©rations est connu ?',t:'mcq',o:['for','while','do-while','loop'],c:0,e:'for est idÃ©al quand on connaÃ®t Ã  l\'avance le nombre d\'itÃ©rations.'},
  ],
  'jv-base':[
    {p:'â˜• Java Â· Bases',q:'Comment afficher du texte en Java ?',t:'mcq',o:['System.out.println("texte");','print("texte");','echo "texte";','console.log("texte");'],c:0,e:'System.out.println() affiche et saute une ligne.'},
    {p:'â˜• Java Â· Types',q:'Type Java pour un entier standard ?',t:'mcq',o:['int','integer','number','whole'],c:0,e:'int est le type primitif entier de base en Java.'},
    {p:'â˜• Java Â· Types',q:'DiffÃ©rence entre int et Integer ?',t:'mcq',o:['int est primitif, Integer est un objet','C\'est pareil','Integer est plus rapide','int est une classe'],c:0,e:'int = type primitif. Integer = objet wrapper avec mÃ©thodes.'},
    {p:'â˜• Java Â· Bases',q:'Comment dÃ©clarer une constante en Java ?',t:'mcq',o:['final int MAX = 100;','const int MAX = 100;','static int MAX = 100;','readonly int MAX = 100;'],c:0,e:'final empÃªche la rÃ©assignation â€” c\'est une constante.'},
    {p:'â˜• Java Â· Bases',q:'Que fait System.out.printf("%d + %d = %d", 2, 3, 5) ?',t:'mcq',o:['Affiche "2 + 3 = 5"','Affiche "%d + %d = %d"','Erreur de compilation','Affiche "2.0 + 3.0 = 5.0"'],c:0,e:'printf formate le texte : %d = entier, %s = string, %f = dÃ©cimal.'},
    {p:'â˜• Java Â· Types',q:'Type pour stocker un seul caractÃ¨re en Java ?',t:'mcq',o:['char','character','String','letter'],c:0,e:'char stocke un seul caractÃ¨re entre apostrophes : \'A\'.'},
    {p:'â˜• Java Â· Bases',q:'Que se passe-t-il si le fichier s\'appelle Main.java mais la classe Hello ?',t:'mcq',o:['Erreur de compilation','Ã‡a fonctionne','Warning uniquement','La classe est renommÃ©e'],c:0,e:'Le nom du fichier .java doit correspondre exactement au nom de la classe publique.'},
  ],
  'lx-term':[
    {p:'ğŸ’» Linux Â· Terminal',q:'Lister les fichiers avec permissions et taille ?',t:'mcq',o:['ls -lh','ls','dir','list -details'],c:0,e:'ls -lh : l=format long, h=taille lisible (Ko, Mo, Go).'},
    {p:'ğŸ’» Linux Â· Terminal',q:'Afficher le rÃ©pertoire courant ?',t:'mcq',o:['pwd','ls','cd','path'],c:0,e:'pwd (print working directory) affiche le chemin absolu.'},
    {p:'ğŸ’» Linux Â· Terminal',q:'CrÃ©er un dossier projet/src/utils en une commande ?',t:'mcq',o:['mkdir -p projet/src/utils','mkdir projet/src/utils','md projet\\src\\utils','makedir projet/src/utils'],c:0,e:'mkdir -p crÃ©e aussi les dossiers parents manquants.'},
    {p:'ğŸ’» Linux Â· Terminal',q:'Copier un dossier entier ?',t:'mcq',o:['cp -r source/ dest/','cp source/ dest/','copy source/ dest/','cp -f source/ dest/'],c:0,e:'cp -r (recursive) copie un dossier et tout son contenu.'},
    {p:'ğŸ’» Linux Â· Terminal',q:'Afficher les 10 derniÃ¨res lignes d\'un fichier ?',t:'mcq',o:['tail -n 10 fichier','head -n 10 fichier','last 10 fichier','cat -10 fichier'],c:0,e:'tail affiche la fin du fichier. head affiche le dÃ©but.'},
    {p:'ğŸ’» Linux Â· Terminal',q:'Chercher "erreur" dans un fichier log ?',t:'mcq',o:['grep "erreur" app.log','find "erreur" app.log','search "erreur" app.log','cat app.log | find "erreur"'],c:0,e:'grep cherche un motif dans un fichier ou une entrÃ©e.'},
    {p:'ğŸ’» Linux Â· Terminal',q:'ComplÃ©tez pour crÃ©er un fichier vide :',t:'fill',code:`<span class="op">___</span> readme.txt`,b:'touch',e:'touch crÃ©e un fichier vide ou met Ã  jour sa date.'},
    {p:'ğŸ’» Linux Â· Terminal',q:'Revenir au rÃ©pertoire home ?',t:'mcq',o:['cd ~','cd ..','cd /home','cd back'],c:0,e:'cd ~ va directement dans votre rÃ©pertoire home (/home/user).'},
  ],
  'mc-env':[
    {p:'â›ï¸ Minecraft Â· Setup',q:'Quel langage pour les mods Forge ?',t:'mcq',o:['Java','Python','C++','Lua'],c:0,e:'Minecraft est en Java, donc les mods Forge aussi.'},
    {p:'â›ï¸ Minecraft Â· Setup',q:'Que signifie MDK ?',t:'mcq',o:['Mod Development Kit','Minecraft Dev Kit','Module Development Key','Main Deployment Kit'],c:0,e:'MDK = Mod Development Kit â€” le kit de base fourni par Forge.'},
    {p:'â›ï¸ Minecraft Â· Setup',q:'Java requis pour Minecraft 1.20+ ?',t:'mcq',o:['Java 17','Java 8','Java 11','Java 21'],c:0,e:'Minecraft 1.17+ requiert Java 17 LTS.'},
    {p:'â›ï¸ Minecraft Â· Setup',q:'Quelle annotation dÃ©clare une classe comme mod Forge ?',t:'mcq',o:['@Mod("monmod")','@Plugin','@ForgeMod','@MinecraftMod'],c:0,e:'@Mod("modid") est l\'annotation fondamentale de tout mod Forge.'},
    {p:'â›ï¸ Minecraft Â· Setup',q:'Fichier de mÃ©tadonnÃ©es d\'un mod Forge ?',t:'fill',code:`src/main/resources/META-INF/<span class="op">___</span>.toml`,b:'mods',e:'mods.toml contient les mÃ©tadonnÃ©es : nom, version, dÃ©pendances.'},
    {p:'â›ï¸ Forge vs Fabric',q:'Avantage principal de Fabric vs Forge ?',t:'mcq',o:['Plus lÃ©ger et mises Ã  jour plus rapides','Plus de mods disponibles','Meilleure documentation','Existe depuis plus longtemps'],c:0,e:'Fabric est plus lÃ©ger et se met Ã  jour rapidement aprÃ¨s chaque version MC.'},
  ],
  'wo-lua':[
    {p:'ğŸ“œ Lua Â· Bases',q:'Mot-clÃ© pour une variable locale en Lua ?',t:'mcq',o:['local','var','let','dim'],c:0,e:'local x = 5 crÃ©e une variable locale. Sans local, elle est globale.'},
    {p:'ğŸ“œ Lua Â· Bases',q:'OpÃ©rateur de concatÃ©nation en Lua ?',t:'mcq',o:['..','+',' &','*'],c:0,e:'"Hello" .. " World" = "Hello World" en Lua.'},
    {p:'ğŸ“œ Lua Â· Tables',q:'Premier index d\'un tableau Lua ?',t:'mcq',o:['1','0','-1','nil'],c:0,e:'Contrairement Ã  la plupart des langages, Lua commence les indices Ã  1 !'},
    {p:'ğŸ“œ Lua Â· Fonctions',q:'Syntaxe correcte pour une fonction Lua ?',t:'mcq',o:['function nom() ... end','def nom(): ...','void nom() {}','function nom() {}'],c:0,e:'Lua utilise function ... end pour dÃ©limiter les blocs.'},
    {p:'ğŸ“œ Lua Â· Commentaires',q:'Comment commenter en Lua ?',t:'mcq',o:['-- commentaire','// commentaire','# commentaire','/* commentaire */'],c:0,e:'-- pour une ligne. --[[ ... ]] pour multi-lignes.'},
    {p:'ğŸ“œ Lua Â· Tables',q:'Parcourir toutes les paires clÃ©/valeur d\'une table Lua ?',t:'mcq',o:['for k,v in pairs(t) do','for k,v in t do','foreach k,v in t','for(k in t)'],c:0,e:'pairs() retourne clÃ© et valeur pour chaque entrÃ©e de la table.'},
    {p:'ğŸ“œ Lua Â· Bases',q:'Valeur reprÃ©sentant "rien" en Lua ?',t:'mcq',o:['nil','null','undefined','void'],c:0,e:'nil est la valeur Lua pour l\'absence de donnÃ©e.'},
  ],
  'daily':[
    {p:'âš¡ DÃ©fi du Jour',q:'En Python, = vs == ?',t:'mcq',o:['= assigne, == compare','== assigne, = compare','Les deux comparent','Les deux assignent'],c:0,e:'= est l\'assignation. == est la comparaison (retourne True/False).'},
    {p:'âš¡ DÃ©fi du Jour',q:'En Java, annotation principale d\'un mod Forge ?',t:'mcq',o:['@Mod','@Plugin','@ForgeMod','@MinecraftMod'],c:0,e:'@Mod("modid") dÃ©clare la classe principale comme un mod Forge.'},
    {p:'âš¡ DÃ©fi du Jour',q:'En Lua WoW, commentaire sur une ligne ?',t:'mcq',o:['--','//','#','/*'],c:0,e:'-- commence un commentaire en Lua.'},
    {p:'âš¡ DÃ©fi du Jour',q:'Commande Ubuntu pour tout mettre Ã  jour ?',t:'mcq',o:['sudo apt upgrade','sudo apt update','sudo apt install --all','sudo apt refresh'],c:0,e:'apt update rafraÃ®chit la liste. apt upgrade installe les mises Ã  jour.'},
    {p:'âš¡ DÃ©fi du Jour',q:'Dans un datapack Minecraft, @p dÃ©signe ?',t:'mcq',o:['Joueur le plus proche','Tous les joueurs','Joueur alÃ©atoire','Soi-mÃªme'],c:0,e:'@p = plus proche, @a = tous, @r = alÃ©atoire, @s = soi-mÃªme.'},
    {p:'âš¡ DÃ©fi du Jour',q:'En Java, quel opÃ©rateur teste l\'Ã©galitÃ© d\'objets par contenu ?',t:'mcq',o:['.equals()','==','===','is'],c:0,e:'== compare les rÃ©fÃ©rences. .equals() compare le contenu des objets.'},
  ],
};
const FALLBACK_Q=[
  {p:'ğŸ’¡ GÃ©nÃ©ral',q:'Qu\'est-ce qu\'une variable ?',t:'mcq',o:['Espace mÃ©moire nommÃ©','Un fichier','Un opÃ©rateur','Un type'],c:0,e:'Une variable stocke une valeur en mÃ©moire sous un nom.'},
  {p:'ğŸ’¡ GÃ©nÃ©ral',q:'Qu\'est-ce qu\'une fonction ?',t:'mcq',o:['Bloc de code rÃ©utilisable','Un type','Un opÃ©rateur','Un fichier'],c:0,e:'Une fonction est un bloc nommÃ© et rÃ©utilisable.'},
  {p:'ğŸ’¡ GÃ©nÃ©ral',q:'Que signifie IDE ?',t:'mcq',o:['Integrated Development Environment','Internet Dev Engine','Indexed Data Entry','Interactive Debug Editor'],c:0,e:'IDE = Environnement de DÃ©veloppement IntÃ©grÃ© (Ã©diteur + outils).'},
];

// â”€â”€ SANDBOX EXERCISES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SANDBOX = {
  'py-var':{
    lang:'Python (simulÃ©)',
    exercises:[
      {label:'Ex 1 â€“ Ma fiche',code:`# CrÃ©ez 4 variables et affichez-les avec un f-string
prenom = "Votre prÃ©nom"
age = 0
ville = "Votre ville"
hobby = "Votre hobby"

print(f"Je m'appelle {prenom}, j'ai {age} ans.")
print(f"J'habite Ã  {ville} et j'aime {hobby}.")`},
      {label:'Ex 2 â€“ Calcul IMC',code:`# Calculez l'IMC (poids / tailleÂ²)
poids = 70      # kg
taille = 1.75   # mÃ¨tres

imc = poids / (taille ** 2)
print(f"IMC: {imc:.1f}")

if imc < 18.5:
    print("Insuffisance pondÃ©rale")
elif imc < 25:
    print("Poids normal")`},
      {label:'Ex 3 â€“ Conversion',code:`# Convertissez des euros en dollars et en livres sterling
euros = 100
taux_dollar = 1.08
taux_livre = 0.86

dollars = euros * taux_dollar
livres = euros * taux_livre

print(f"{euros}â‚¬ = $"+str(dollars)+" = Â£"+str(livres))`},
    ]
  },
  'py-loop':{
    lang:'Python (simulÃ©)',
    exercises:[
      {label:'Ex 1 â€“ Table de multiplication',code:`# Affichez la table de multiplication de 7
for i in range(1, 11):
    resultat = 7 * i
    print(f"7 x {i} = {resultat}")`},
      {label:'Ex 2 â€“ Compte Ã  rebours',code:`# Compte Ã  rebours de 10 Ã  0
compteur = 10
while compteur >= 0:
    if compteur == 0:
        print("DÃ‰COLLAGE ! ğŸš€")
    else:
        print(compteur)
    compteur -= 1`},
      {label:'Ex 3 â€“ Nombres pairs',code:`# Affichez tous les nombres pairs de 0 Ã  20
for i in range(0, 21):
    if i % 2 == 0:
        print(i, end=" ")
print()  # Nouvelle ligne Ã  la fin`},
    ]
  },
  'lx-term':{
    lang:'Bash (simulÃ©)',
    exercises:[
      {label:'Ex 1 â€“ Navigation',code:`# Ces commandes s'exÃ©cutent en vrai dans votre terminal !
# Essayez-les une par une :

pwd
ls -la
cd ~
mkdir test_codequest
cd test_codequest
touch fichier1.txt fichier2.txt
ls`},
      {label:'Ex 2 â€“ Fichiers',code:`# Manipulation de fichiers :
echo "Bonjour Linux" > bonjour.txt
cat bonjour.txt
cp bonjour.txt copie.txt
ls -lh
rm copie.txt
ls`},
    ]
  },
};

// â”€â”€ ACHIEVEMENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ACHIEVEMENTS=[
  {ico:'ğŸ”¥',nm:'7 jours de suite',ds:'SÃ©rie de 7 jours',cond:u=>u.streak>=7},
  {ico:'âš¡',nm:'1 000 XP',ds:'Atteignez 1000 XP',cond:u=>u.xp>=1000},
  {ico:'ğŸ“–',nm:'Premier Cours',ds:'Lisez un cours complet',cond:u=>(u.readChapters||[]).length>0},
  {ico:'ğŸ“',nm:'DiplÃ´mÃ©',ds:'Terminez 5 leÃ§ons',cond:u=>(u.done||[]).length>=5},
  {ico:'ğŸ',nm:'Pythoniste',ds:'Terminez Python Variables',cond:u=>(u.done||[]).includes('py-var')},
  {ico:'â›ï¸',nm:'Creeper Coder',ds:'Terminez Minecraft Setup',cond:u=>(u.done||[]).includes('mc-env')},
  {ico:'ğŸ§™',nm:'Warlock Dev',ds:'Terminez Lua WoW',cond:u=>(u.done||[]).includes('wo-lua')},
  {ico:'ğŸ’»',nm:'Terminal Pro',ds:'Terminez Linux Terminal',cond:u=>(u.done||[]).includes('lx-term')},
  {ico:'ğŸ¯',nm:'Perfect Run',ds:'100% sur un quiz',cond:u=>(u.perfectRuns||0)>=1},
  {ico:'â˜ï¸',nm:'Cloud Saver',ds:'ConnectÃ© via Firebase',cond:_=>true},
];

const MOCK_LB=[
  {name:'AlexCode',ava:'ğŸ‘¨â€ğŸ’»',xp:12450,streak:21,lvl:25},
  {name:'SarahDev',ava:'ğŸ‘©â€ğŸ’»',xp:10320,streak:14,lvl:21},
  {name:'MarcLinux',ava:'ğŸ§‘â€ğŸ’»',xp:9180,streak:8,lvl:19},
  {name:'PierreWoW',ava:'ğŸ§™',xp:7200,streak:5,lvl:15},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  APP STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let ST = {
  unit: null, course: null,
  // Theory
  chIdx: 0, chapters: [],
  // Quiz
  qs:[], qIdx:0, correct:0, start:null, answered:false, quizUnitId:null,
  // Sandbox
  sbExercises:[], sbIdx:0,
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AUTH UI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initAuthUI(){
  const ag=document.getElementById('ava-grid');
  ag.innerHTML=AVATARS.map((a,i)=>`<div class="ava-o ${i===0?'sel':''}" onclick="selAvaFn(this,'${a}')">${a}</div>`).join('');
}
function selAvaFn(el,a){document.querySelectorAll('.ava-o').forEach(e=>e.classList.remove('sel'));el.classList.add('sel');selAva=a;}
function switchTab(t){
  document.querySelectorAll('.a-tab').forEach(e=>e.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('tab-login').style.display=t==='login'?'block':'none';
  document.getElementById('tab-register').style.display=t==='register'?'block':'none';
  clearMsg();
}
function showMsg(txt,type='err'){const m=document.getElementById('a-msg');m.textContent=txt;m.className=`a-msg show ${type}`;}
function clearMsg(){document.getElementById('a-msg').classList.remove('show');}

async function doLogin(){
  const email=document.getElementById('l-email').value.trim();
  const pwd=document.getElementById('l-pwd').value;
  clearMsg();if(!email||!pwd){showMsg('Remplissez tous les champs.');return;}
  const btn=document.getElementById('login-btn');btn.disabled=true;btn.textContent='Connexionâ€¦';
  try{
    const {auth,signInWithEmailAndPassword}=window._fb;
    await signInWithEmailAndPassword(auth,email,pwd);
  }catch(e){
    btn.disabled=false;btn.textContent='Se connecter â†’';
    const m={'auth/user-not-found':'Compte introuvable.','auth/wrong-password':'Mot de passe incorrect.','auth/invalid-email':'Email invalide.'};
    showMsg(m[e.code]||'Erreur de connexion.');
  }
}
async function doRegister(){
  const name=document.getElementById('r-name').value.trim();
  const email=document.getElementById('r-email').value.trim();
  const pwd=document.getElementById('r-pwd').value;
  clearMsg();if(!name||!email||!pwd){showMsg('Remplissez tous les champs.');return;}
  if(pwd.length<6){showMsg('Mot de passe : min. 6 caractÃ¨res.');return;}
  const btn=document.getElementById('reg-btn');btn.disabled=true;btn.textContent='CrÃ©ationâ€¦';
  try{
    const {auth,db,createUserWithEmailAndPassword,doc,setDoc,serverTimestamp}=window._fb;
    const cred=await createUserWithEmailAndPassword(auth,email,pwd);
    const ud={uid:cred.user.uid,name,email,avatar:selAva,xp:0,level:1,xpPct:0,streak:1,
      lastDay:new Date().toDateString(),done:[],readChapters:[],totalAnswered:0,totalCorrect:0,perfectRuns:0,createdAt:serverTimestamp()};
    await setDoc(doc(db,'users',cred.user.uid),ud);
    window._user=ud;
  }catch(e){
    btn.disabled=false;btn.textContent='CrÃ©er mon compte ğŸš€';
    const m={'auth/email-already-in-use':'Email dÃ©jÃ  utilisÃ©.','auth/weak-password':'Mot de passe trop faible.'};
    showMsg(m[e.code]||'Erreur lors de la crÃ©ation.');
  }
}
async function doLogout(){const {auth,signOut}=window._fb;await signOut(auth);window._user=null;showScreen('auth');}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  APP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showScreen(n){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById('screen-'+n).classList.add('active');}

async function enterApp(user){
  checkStreak(user);
  showScreen('app');
  refreshTopbar(user);
  renderCourses(user);
  renderLB(user);
  renderProfile(user);
  showView('home');
}

async function checkStreak(user){
  const today=new Date().toDateString();
  if(user.lastDay===today)return;
  const yest=new Date(Date.now()-86400000).toDateString();
  user.streak=user.lastDay===yest?(user.streak||0)+1:1;
  user.lastDay=today;
  window._user=user;
  await saveUser(user);
}

async function saveUser(user){
  try{
    const {db,doc,updateDoc}=window._fb;
    const{uid,createdAt,...data}=user;
    await updateDoc(doc(db,'users',uid),data);
    showToast('â˜ï¸ SauvegardÃ©','cloud');
  }catch(e){console.warn('Save:',e);}
}

function refreshTopbar(user){
  document.getElementById('hero-name').textContent=user.name;
  document.getElementById('tb-lvl').textContent=user.level||1;
  document.getElementById('tb-xp').textContent=(user.xp||0).toLocaleString('fr');
  document.getElementById('tb-str').textContent=user.streak||0;
  document.getElementById('tb-xpf').style.width=(user.xpPct||0)+'%';
  document.getElementById('sb-ava').textContent=user.avatar||'ğŸ§‘';
}

// â”€â”€ COURSES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getPct(user,cid){
  const c=COURSES.find(x=>x.id===cid);if(!c)return 0;
  const d=(user.done||[]).filter(id=>c.units.some(u=>u.id===id)).length;
  return Math.round((d/c.units.length)*100);
}
function renderCourses(user){
  document.getElementById('courses-grid').innerHTML=COURSES.map(c=>{
    const pct=getPct(user,c.id);
    const d=c.units.filter(u=>(user.done||[]).includes(u.id)).length;
    return `<div class="cc" style="--cc:${c.color}" onclick="openCourse('${c.id}')">
      ${c.badge?`<div class="cc-bdg">${c.badge}</div>`:''}
      <div class="cc-ico">${c.icon}</div>
      <div class="cc-nm">${c.name}</div>
      <div class="cc-ds">${c.desc}</div>
      <div class="cc-pg"><div class="cc-pgf" style="width:${pct}%"></div></div>
      <div class="cc-mt"><span>${pct}% complÃ©tÃ©</span><span>${d}/${c.units.length}</span></div>
    </div>`;
  }).join('');
}

function openCourse(id){
  const user=window._user;
  const c=COURSES.find(x=>x.id===id);
  ST.course=c;
  document.getElementById('lesson-title').textContent=`${c.icon} ${c.name}`;
  document.getElementById('lesson-sub').textContent=`${getPct(user,id)}% complÃ©tÃ© Â· ${c.units.length} leÃ§ons`;
  const done=user.done||[];
  document.getElementById('units-list').innerHTML=c.units.map((u,i)=>{
    const isDone=done.includes(u.id);
    const isLocked=u.locked&&!isDone&&!done.includes(c.units[i-1]?.id||'');
    const hasTheory=!!THEORY[u.id];
    const hasSandbox=!!SANDBOX[u.id];
    return `<div class="unit-row ${isDone?'done':''} ${isLocked?'locked':''}" style="--uc:${c.color}"
      onclick="${!isLocked?`openUnit('${u.id}')`:`showToast('ğŸ”’ Terminez les leÃ§ons prÃ©cÃ©dentes !','err')`}">
      <div class="u-ico">${isDone?'âœ…':u.icon}</div>
      <div class="u-txt"><h3>${u.name}</h3><p>${u.desc}</p></div>
      <div class="u-modes">
        ${hasTheory?'<span class="u-mode-badge theory">ğŸ“– Cours</span>':''}
        ${hasSandbox?'<span class="u-mode-badge code">ğŸ’» Code</span>':''}
        <span class="u-mode-badge quiz">ğŸ¯ Quiz</span>
      </div>
      <div class="u-xp">+${u.xp} XP</div>
      <span style="font-size:1rem">${isLocked?'ğŸ”’':isDone?'â­':'â–¶ï¸'}</span>
    </div>`;
  }).join('');
  showView('lessons');
}

function openUnit(id){
  const user=window._user;
  const allUnits=COURSES.flatMap(c=>c.units);
  const u=allUnits.find(x=>x.id===id);
  ST.unit=u;
  document.getElementById('unit-title').textContent=`${u.icon} ${u.name}`;
  document.getElementById('unit-sub').textContent=u.desc;
  // Quiz lock check
  const read=user.readChapters||[];
  const quizUnlocked=read.includes(id)||(user.done||[]).includes(id);
  const pill=document.getElementById('quiz-lock-pill');
  const qCard=document.getElementById('quiz-mode-card');
  if(quizUnlocked){
    pill.textContent='Disponible !'; pill.style.background='#5eead420'; pill.style.color='var(--a)'; pill.style.borderColor='#5eead440';
    qCard.style.opacity='1'; qCard.onclick=()=>startQuiz(id);
  } else {
    pill.textContent='Lisez le cours d\'abord'; pill.style.background=''; pill.style.color=''; pill.style.borderColor='';
    qCard.style.opacity='0.5'; qCard.onclick=()=>showToast('ğŸ“– Lisez d\'abord le cours thÃ©orique !','info');
  }
  // Hide sandbox if no content
  const sbCard=document.querySelector('.mode-card.code-c');
  sbCard.style.display=SANDBOX[id]?'':'none';
  showView('unit');
}

// â”€â”€ THEORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startTheory(){
  const u=ST.unit;
  const data=THEORY[u.id];
  if(!data){showToast('Cours en cours de rÃ©dactionâ€¦ Revenez bientÃ´t !','info');return;}
  ST.chapters=data.chapters; ST.chIdx=0;
  renderChapter();
  showView('theory');
}

function renderChapter(){
  const ch=ST.chapters[ST.chIdx];
  const total=ST.chapters.length;
  // Dots
  const dots=document.getElementById('ch-prog-dots');
  dots.innerHTML=ST.chapters.map((_,i)=>`<div class="ch-dot ${i<ST.chIdx?'done':i===ST.chIdx?'active':''}"></div>`).join('');
  document.getElementById('ch-prog-label').textContent=`Chapitre ${ST.chIdx+1}/${total}`;
  // Content
  const data=THEORY[ST.unit.id];
  document.getElementById('theory-content').innerHTML=`
    <div class="theory-card">
      <div class="ch-badge">ğŸ“– ${data.title} Â· Chapitre ${ST.chIdx+1}/${total}</div>
      <h2>${ch.title}</h2>
      ${ch.content}
    </div>`;
  // Nav buttons
  const nav=document.getElementById('theory-nav');
  const isLast=ST.chIdx===total-1;
  nav.innerHTML=`
    ${ST.chIdx>0?`<button class="t-btn prev" onclick="prevChapter()">â† PrÃ©cÃ©dent</button>`:'<div></div>'}
    ${isLast
      ? `<button class="t-btn finish" onclick="finishTheory()">âœ… J'ai compris â€” Passer au quiz !</button>`
      : `<button class="t-btn next" onclick="nextChapter()">Suivant â†’ Chapitre ${ST.chIdx+2}</button>`}`;
}

function nextChapter(){ST.chIdx++;renderChapter();document.querySelector('.content').scrollTo(0,0);}
function prevChapter(){ST.chIdx--;renderChapter();document.querySelector('.content').scrollTo(0,0);}

async function finishTheory(){
  const user=window._user;
  const uid=ST.unit.id;
  user.readChapters=user.readChapters||[];
  if(!user.readChapters.includes(uid)){user.readChapters.push(uid);}
  window._user=user;
  await saveUser(user);
  // Show completion screen
  document.getElementById('theory-content').innerHTML=`
    <div class="theory-complete">
      <div class="tc-icon">ğŸ“</div>
      <div class="tc-title">Cours terminÃ© !</div>
      <div class="tc-sub">Excellent ! Vous avez lu tous les chapitres de <strong>${ST.unit.name}</strong>.<br>
        Le quiz est maintenant dÃ©bloquÃ©. Testez vos connaissances !</div>
      <div class="tc-btns">
        <button class="tc-btn quiz-go" onclick="startQuiz('${uid}')">ğŸ¯ Lancer le Quiz</button>
        <button class="tc-btn back-home" onclick="showView('unit')">â† Retour Ã  la leÃ§on</button>
      </div>
    </div>`;
  document.getElementById('theory-nav').innerHTML='';
  document.getElementById('ch-prog-dots').querySelectorAll('.ch-dot').forEach(d=>d.classList.add('done'));
  showToast('ğŸ“– Cours lu ! Quiz dÃ©bloquÃ© ğŸ¯','info');
}

// â”€â”€ SANDBOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startSandbox(){
  const u=ST.unit;
  const sb=SANDBOX[u.id];
  if(!sb){showToast('Sandbox en prÃ©parationâ€¦ Revenez bientÃ´t !','info');return;}
  ST.sbExercises=sb.exercises; ST.sbIdx=0;
  document.getElementById('sandbox-title').textContent=`ğŸ’» ${u.name}`;
  document.getElementById('sb-lang-label').textContent=sb.lang;
  renderExList();
  loadExercise(0);
  showView('sandbox');
}

function renderExList(){
  document.getElementById('ex-list').innerHTML=ST.sbExercises.map((ex,i)=>
    `<button class="ex-btn ${i===0?'active':''}" onclick="loadExercise(${i})">${ex.label}</button>`
  ).join('');
}

function loadExercise(i){
  ST.sbIdx=i;
  document.querySelectorAll('.ex-btn').forEach((b,j)=>b.classList.toggle('active',j===i));
  document.getElementById('code-editor').value=ST.sbExercises[i].code;
  clearOutput();
}

function runCode(){
  const code=document.getElementById('code-editor').value;
  const out=document.getElementById('output-area');
  out.innerHTML='';
  const lines=[];
  // Simple Python/Bash simulator
  const printMatches=[...code.matchAll(/print\(([^)]+)\)/g)];
  const echoMatches=[...code.matchAll(/echo\s+"([^"]+)"/g)];
  if(printMatches.length===0&&echoMatches.length===0){
    out.innerHTML=`<div class="out-info">Aucun print() ou echo trouvÃ© dans le code.</div>
      <div class="out-info">Note : l'exÃ©cution complÃ¨te nÃ©cessite un vrai environnement Python/Bash.</div>`;
    return;
  }
  printMatches.forEach(m=>{
    let val=m[1].trim();
    val=val.replace(/f"([^"]+)"/g,(_,s)=>s.replace(/\{[^}]+\}/g,'<valeur>'));
    val=val.replace(/^"|"$/g,'').replace(/^'|'$/g,'');
    lines.push(`<div class="out-line out-ok">â†’ ${val}</div>`);
  });
  echoMatches.forEach(m=>lines.push(`<div class="out-line out-ok">â†’ ${m[1]}</div>`));
  if(lines.length)out.innerHTML=lines.join('')+`<div class="out-info" style="margin-top:.5rem">ğŸ’¡ ExÃ©cution simulÃ©e. Pour de vrais rÃ©sultats, copiez ce code dans votre Ã©diteur local.</div>`;
}

function clearOutput(){document.getElementById('output-area').innerHTML=`<span class="out-info">Cliquez â–¶ ExÃ©cuter pour voir le rÃ©sultatâ€¦</span>`;}
function resetEditor(){loadExercise(ST.sbIdx);}

function copyCode(btn){
  const block=btn.closest('.codeblock');
  const text=block.innerText.replace(/^(Copier|Python|Java|Bash|Lua|TOML|Structure|Setup)\n/,'').replace(/^Copier\n/,'');
  navigator.clipboard.writeText(text).then(()=>{btn.textContent='âœ“';btn.classList.add('cp');setTimeout(()=>{btn.textContent='Copier';btn.classList.remove('cp');},1500);});
}

// â”€â”€ QUIZ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startQuiz(unitId){
  const id=unitId||ST.unit?.id;
  ST.quizUnitId=id;
  const bank=[...(QB[id]||FALLBACK_Q)];
  // Shuffle and pick max 8
  bank.sort(()=>Math.random()-.5);
  ST.qs=bank.slice(0,Math.min(8,bank.length));
  ST.qIdx=0; ST.correct=0; ST.answered=false; ST.start=Date.now();
  showView('quiz');
  loadQ();
}

function loadQ(){
  const q=ST.qs[ST.qIdx];
  const pct=Math.round((ST.qIdx/ST.qs.length)*100);
  document.getElementById('q-prog').style.width=pct+'%';
  document.getElementById('q-ctr').textContent=`${ST.qIdx+1}/${ST.qs.length}`;
  document.getElementById('q-pill').textContent=q.p||'Question';
  document.getElementById('q-txt').textContent=q.q;
  document.getElementById('q-fb').className='feedback';
  document.getElementById('skip-btn').style.display='';
  ST.answered=false;
  const code=document.getElementById('q-code');
  q.code?(code.style.display='block',code.innerHTML=q.code):(code.style.display='none');
  const wrap=document.getElementById('q-opts');
  const sb=document.getElementById('submit-btn');
  sb.textContent='VÃ©rifier';sb.className='q-btn primary';sb.disabled=true;sb.onclick=handleSubmit;
  if(q.t==='mcq'){
    const keys=['A','B','C','D'];
    // MÃ©langer les options et suivre la bonne rÃ©ponse
    const correctText = q.o[q.c];
    const shuffled = [...q.o].sort(() => Math.random() - 0.5);
    ST.currentCorrectIdx = shuffled.indexOf(correctText);
    let html = '<div class="opts">';
    for(let i=0; i<shuffled.length; i++){
      html += '<button class="opt" onclick="selOpt(this,'+i+')" data-i="'+i+'">';
      html += '<span class="opt-k">'+keys[i]+'</span>';
      html += shuffled[i];
      html += '</button>';
    }
    html += '</div>';
    wrap.innerHTML = html;
  }else{
    wrap.innerHTML=`<input class="fill-inp" id="fill-inp" placeholder="Votre rÃ©ponseâ€¦" autocomplete="off"
      oninput="document.getElementById('submit-btn').disabled=this.value.trim()===''">`;
    setTimeout(()=>document.getElementById('fill-inp')?.focus(),50);
  }
}

function selOpt(btn,idx){
  if(ST.answered)return;
  document.querySelectorAll('.opt').forEach(b=>b.classList.remove('sel'));
  btn.classList.add('sel');
  document.getElementById('submit-btn').disabled=false;
}

function handleSubmit(){
  if(ST.answered){nextQ();return;}
  ST.answered=true;
  const q=ST.qs[ST.qIdx];let ok=false;
  if(q.t==='mcq'){
    const sel=document.querySelector('.opt.sel');
    const idx=parseInt(sel?.dataset.i??'-1');
    const correctIdx = ST.currentCorrectIdx;
    ok=idx===correctIdx;
    document.querySelectorAll('.opt').forEach((b,i)=>{
      b.disabled=true;
      if(i===correctIdx)b.classList.add('ok');
      else if(i===idx&&!ok)b.classList.add('bad');
    });
  }else{
    const inp=document.getElementById('fill-inp');
    ok=inp?.value.trim().toLowerCase()===q.b?.toLowerCase();
    if(inp){inp.disabled=true;inp.className='fill-inp '+(ok?'ok':'bad');}
  }
  if(ok){ST.correct++;showToast('+10 XP âš¡','xp');}
  const fb=document.getElementById('q-fb');
  fb.className=`feedback show ${ok?'ok':'bad'}`;
  document.getElementById('fb-ico').textContent=ok?'âœ…':'âŒ';
  document.getElementById('fb-title').textContent=ok?'Correct ! âœ“':'Pas tout Ã  faitâ€¦';
  document.getElementById('fb-det').textContent=q.e||'';
  const sb=document.getElementById('submit-btn');
  sb.textContent=ST.qIdx<ST.qs.length-1?'Continuer â†’':'Voir les rÃ©sultats';
  sb.className='q-btn success';sb.disabled=false;sb.onclick=nextQ;
  document.getElementById('skip-btn').style.display='none';
}

function skipQ(){ST.qIdx++;if(ST.qIdx>=ST.qs.length){showResults();return;}loadQ();}
function nextQ(){ST.qIdx++;if(ST.qIdx>=ST.qs.length){showResults();return;}loadQ();}

async function showResults(){
  const user=window._user;
  const elapsed=Math.floor((Date.now()-ST.start)/1000);
  const total=ST.qs.length;
  const acc=Math.round((ST.correct/total)*100);
  const xp=ST.correct*10*(ST.quizUnitId==='daily'?2:1);
  user.xp=(user.xp||0)+xp;
  user.totalAnswered=(user.totalAnswered||0)+total;
  user.totalCorrect=(user.totalCorrect||0)+ST.correct;
  if(acc===100)user.perfectRuns=(user.perfectRuns||0)+1;
  if(ST.quizUnitId&&ST.quizUnitId!=='daily'){
    user.done=user.done||[];
    if(!user.done.includes(ST.quizUnitId))user.done.push(ST.quizUnitId);
  }
  const xpPerLvl=500;
  user.level=Math.floor(user.xp/xpPerLvl)+1;
  user.xpPct=((user.xp%xpPerLvl)/xpPerLvl)*100;
  window._user=user;
  refreshTopbar(user);renderCourses(user);renderProfile(user);
  await saveUser(user);
  const m=Math.floor(elapsed/60),s=elapsed%60;
  const e=acc>=90?'ğŸ†':acc>=70?'ğŸ‰':acc>=50?'ğŸ‘':'ğŸ’ª';
  document.getElementById('res-trophy').textContent=e;
  document.getElementById('res-title').textContent=acc>=90?'Parfait !':acc>=70?'Excellent !':acc>=50?'Bien jouÃ© !':'Continue !';
  document.getElementById('res-sub').textContent=`${ST.correct}/${total} bonnes rÃ©ponses Â· SauvegardÃ© dans le cloud â˜ï¸`;
  document.getElementById('rv-xp').textContent='+'+xp;
  document.getElementById('rv-acc').textContent=acc+'%';
  document.getElementById('rv-time').textContent=`${m}:${s.toString().padStart(2,'0')}`;
  showView('results');
}

function replayQuiz(){startQuiz(ST.quizUnitId);}
function exitQuiz(){ST.unit?showView('unit'):showView('home');}

// â”€â”€ LEADERBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderLB(user){
  user=user||window._user;
  const all=[...(user?[{name:user.name,ava:user.avatar||'ğŸ§‘',xp:user.xp||0,streak:user.streak||0,lvl:user.level||1,me:true}]:[]),...MOCK_LB].sort((a,b)=>b.xp-a.xp);
  const medals=['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
  document.getElementById('lb-rows').innerHTML=all.map((p,i)=>`
    <div class="lb-r ${p.me?'me':''}">
      <div class="lb-rank">${medals[i]||i+1}</div>
      <div class="lb-ava" style="background:${p.me?'#5eead422':'#1a1d2e'}">${p.ava}</div>
      <div class="lb-inf">
        <div class="lb-nm">${p.name}${p.me?' <span style="color:var(--a);font-size:.68rem">â† Vous</span>':''}</div>
        <div class="lb-sb">Niveau ${p.lvl||1} Â· ğŸ”¥${p.streak} jours</div>
      </div>
      <div class="lb-xp">âš¡ ${(p.xp||0).toLocaleString('fr')}</div>
    </div>`).join('');
}

// â”€â”€ PROFILE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderProfile(user){
  user=user||window._user;if(!user)return;
  document.getElementById('p-ava').textContent=user.avatar||'ğŸ§‘';
  document.getElementById('p-name').textContent=user.name;
  document.getElementById('p-email').textContent=user.email;
  document.getElementById('ps-xp').textContent=(user.xp||0).toLocaleString('fr');
  document.getElementById('ps-str').textContent='ğŸ”¥'+(user.streak||0);
  document.getElementById('ps-les').textContent=(user.done||[]).length;
  const acc=user.totalAnswered?Math.round((user.totalCorrect/user.totalAnswered)*100):0;
  document.getElementById('ps-acc').textContent=acc+'%';
  document.getElementById('ach-grid').innerHTML=ACHIEVEMENTS.map(a=>{
    const un=a.cond(user);
    return `<div class="ach-c ${un?'unlocked':''}">
      <div class="ach-ico">${a.ico}</div><div class="ach-nm">${a.nm}</div><div class="ach-ds">${a.ds}</div>
      ${un?'<div style="margin-top:.3rem;font-size:.62rem;color:var(--a4);font-weight:800">âœ“ DÃ‰BLOQUÃ‰</div>':''}
    </div>`;
  }).join('');
}

// â”€â”€ NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showView(n){
  document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
  document.querySelectorAll('.nb').forEach(b=>b.classList.remove('active'));
  document.getElementById('view-'+n)?.classList.add('active');
  document.getElementById('nb-'+n)?.classList.add('active');
  if(n==='lb')renderLB();
  if(n==='profile')renderProfile();
}

// â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let _tt;
function showToast(msg,cls='xp'){
  const t=document.getElementById('toast');
  t.textContent=msg;t.className=`toast ${cls} show`;
  clearTimeout(_tt);_tt=setTimeout(()=>t.classList.remove('show'),2200);
}

// â”€â”€ BOOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
initAuthUI();
</script>
</body>
</html>
